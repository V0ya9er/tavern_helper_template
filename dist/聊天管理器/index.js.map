{"version":3,"file":"index.js","mappings":"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","sources":["webpack://tavern_helper_template/src/聊天管理器/components/MainPanel.vue?424e","webpack://tavern_helper_template/src/聊天管理器/components/ForestView.vue?b28f","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/listToStyles.js","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js","webpack://tavern_helper_template/src/聊天管理器/components/ChatCard.vue?9ecc","src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://tavern_helper_template/src/聊天管理器/components/ForestView.vue?5b41","webpack://tavern_helper_template/src/聊天管理器/components/ChatCard.vue?6907","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/api.js","webpack://tavern_helper_template/src/聊天管理器/components/MainPanel.vue?8a82","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/webpack/runtime/compat get default export","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/webpack/runtime/make namespace object","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/src/聊天管理器/data/chat-parser.ts","src://tavern_helper_template/src/聊天管理器/data/chat-tree.ts","src://tavern_helper_template/src/聊天管理器/data/types.ts","src://tavern_helper_template/src/聊天管理器/store.ts","src://tavern_helper_template/src/聊天管理器/components/ChatCard.vue","webpack://tavern_helper_template/src/聊天管理器/components/ChatCard.vue?8624","src://tavern_helper_template/src/聊天管理器/components/ForestView.vue","webpack://tavern_helper_template/src/聊天管理器/components/ForestView.vue?8ddc","src://tavern_helper_template/src/聊天管理器/components/MainPanel.vue","webpack://tavern_helper_template/src/聊天管理器/components/MainPanel.vue?2966","src://tavern_helper_template/src/聊天管理器/index.ts","src://tavern_helper_template/src/util/script.ts"],"sourcesContent":["/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-169.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.1_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MainPanel.vue?vue&type=style&index=0&id=34a25112&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7cfd5b62\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-169.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.1_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MainPanel.vue?vue&type=style&index=0&id=34a25112&lang=scss&scoped=true\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-169.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.1_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MainPanel.vue?vue&type=style&index=0&id=34a25112&lang=scss&scoped=true\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.forest-view[data-v-492ea9d4]{flex:1;overflow-y:auto;padding:8px}.forest-list[data-v-492ea9d4]{display:flex;flex-direction:column;gap:12px}.tree-group[data-v-492ea9d4]{background:hsla(0,0%,100%,.02);border:1px solid hsla(0,0%,100%,.08);border-radius:8px;overflow:hidden}.tree-header[data-v-492ea9d4]{display:flex;align-items:center;gap:10px;padding:12px 14px;background:rgba(0,0,0,.15);cursor:pointer;transition:background .15s}.tree-header[data-v-492ea9d4]:hover{background:rgba(0,0,0,.25)}.tree-header.has-current[data-v-492ea9d4]{border-left:3px solid #22c55e;background:rgba(34,197,94,.08)}.expand-btn[data-v-492ea9d4]{width:24px;height:24px;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0);border:none;color:var(--SmartThemeBodyColor,#ccc);cursor:pointer;opacity:.7}.expand-btn[data-v-492ea9d4]:hover{opacity:1}.tree-icon[data-v-492ea9d4]{font-size:16px;color:var(--SmartThemeBodyColor,#aaa);opacity:.8}.tree-info[data-v-492ea9d4]{flex:1;display:flex;align-items:center;gap:8px;min-width:0}.tree-name[data-v-492ea9d4]{font-weight:500;color:var(--SmartThemeBodyColor,#fff);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.current-badge[data-v-492ea9d4]{font-size:10px;padding:2px 6px;border-radius:4px;background:#22c55e;color:#fff;font-weight:500}.tree-meta[data-v-492ea9d4]{display:flex;gap:14px;font-size:12px;color:var(--SmartThemeBodyColor,#888);opacity:.7}.tree-meta i[data-v-492ea9d4]{margin-right:4px}.select-all-btn[data-v-492ea9d4]{width:28px;height:28px;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0);border:none;color:var(--SmartThemeBodyColor,#aaa);cursor:pointer;opacity:.6;transition:all .15s}.select-all-btn[data-v-492ea9d4]:hover{opacity:1;color:#3b82f6}.tree-nodes[data-v-492ea9d4]{padding:4px;display:flex;flex-direction:column;gap:2px}.empty-state[data-v-492ea9d4]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:var(--SmartThemeBodyColor,#888);opacity:.6}.empty-state i[data-v-492ea9d4]{font-size:56px;margin-bottom:16px}.empty-state p[data-v-492ea9d4]{margin:0;font-size:15px}.list-enter-active[data-v-492ea9d4],.list-leave-active[data-v-492ea9d4]{transition:all .2s ease}.list-enter-from[data-v-492ea9d4],.list-leave-to[data-v-492ea9d4]{opacity:0;transform:translateX(-10px)}.list-move[data-v-492ea9d4]{transition:transform .2s ease}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/聊天管理器/components/ForestView.vue\"],\"names\":[],\"mappings\":\"AACA,8BACE,MAAA,CACA,eAAA,CACA,WAAA,CAGF,8BACE,YAAA,CACA,qBAAA,CACA,QAAA,CAGF,6BACE,8BAAA,CACA,oCAAA,CACA,iBAAA,CACA,eAAA,CAGF,8BACE,YAAA,CACA,kBAAA,CACA,QAAA,CACA,iBAAA,CACA,0BAAA,CACA,cAAA,CACA,0BAAA,CAEA,oCACE,0BAAA,CAGF,0CACE,6BAAA,CACA,8BAAA,CAIJ,6BACE,UAAA,CACA,WAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,wBAAA,CACA,WAAA,CACA,qCAAA,CACA,cAAA,CACA,UAAA,CAEA,mCACE,SAAA,CAIJ,4BACE,cAAA,CACA,qCAAA,CACA,UAAA,CAGF,4BACE,MAAA,CACA,YAAA,CACA,kBAAA,CACA,OAAA,CACA,WAAA,CAGF,4BACE,eAAA,CACA,qCAAA,CACA,eAAA,CACA,sBAAA,CACA,kBAAA,CAGF,gCACE,cAAA,CACA,eAAA,CACA,iBAAA,CACA,kBAAA,CACA,UAAA,CACA,eAAA,CAGF,4BACE,YAAA,CACA,QAAA,CACA,cAAA,CACA,qCAAA,CACA,UAAA,CAEA,8BACE,gBAAA,CAIJ,iCACE,UAAA,CACA,WAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,wBAAA,CACA,WAAA,CACA,qCAAA,CACA,cAAA,CACA,UAAA,CACA,mBAAA,CAEA,uCACE,SAAA,CACA,aAAA,CAIJ,6BACE,WAAA,CACA,YAAA,CACA,qBAAA,CACA,OAAA,CAGF,8BACE,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CACA,iBAAA,CACA,qCAAA,CACA,UAAA,CAEA,gCACE,cAAA,CACA,kBAAA,CAGF,gCACE,QAAA,CACA,cAAA,CAKJ,wEAEE,uBAAA,CAGF,kEAEE,SAAA,CACA,2BAAA,CAGF,4BACE,6BAAA\",\"sourcesContent\":[\"\\n.forest-view {\\n  flex: 1;\\n  overflow-y: auto;\\n  padding: 8px;\\n}\\n\\n.forest-list {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 12px;\\n}\\n\\n.tree-group {\\n  background: rgba(255, 255, 255, 0.02);\\n  border: 1px solid rgba(255, 255, 255, 0.08);\\n  border-radius: 8px;\\n  overflow: hidden;\\n}\\n\\n.tree-header {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n  padding: 12px 14px;\\n  background: rgba(0, 0, 0, 0.15);\\n  cursor: pointer;\\n  transition: background 0.15s;\\n\\n  &:hover {\\n    background: rgba(0, 0, 0, 0.25);\\n  }\\n\\n  &.has-current {\\n    border-left: 3px solid #22c55e;\\n    background: rgba(34, 197, 94, 0.08);\\n  }\\n}\\n\\n.expand-btn {\\n  width: 24px;\\n  height: 24px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background: transparent;\\n  border: none;\\n  color: var(--SmartThemeBodyColor, #ccc);\\n  cursor: pointer;\\n  opacity: 0.7;\\n\\n  &:hover {\\n    opacity: 1;\\n  }\\n}\\n\\n.tree-icon {\\n  font-size: 16px;\\n  color: var(--SmartThemeBodyColor, #aaa);\\n  opacity: 0.8;\\n}\\n\\n.tree-info {\\n  flex: 1;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  min-width: 0;\\n}\\n\\n.tree-name {\\n  font-weight: 500;\\n  color: var(--SmartThemeBodyColor, #fff);\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n}\\n\\n.current-badge {\\n  font-size: 10px;\\n  padding: 2px 6px;\\n  border-radius: 4px;\\n  background: #22c55e;\\n  color: #fff;\\n  font-weight: 500;\\n}\\n\\n.tree-meta {\\n  display: flex;\\n  gap: 14px;\\n  font-size: 12px;\\n  color: var(--SmartThemeBodyColor, #888);\\n  opacity: 0.7;\\n\\n  i {\\n    margin-right: 4px;\\n  }\\n}\\n\\n.select-all-btn {\\n  width: 28px;\\n  height: 28px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background: transparent;\\n  border: none;\\n  color: var(--SmartThemeBodyColor, #aaa);\\n  cursor: pointer;\\n  opacity: 0.6;\\n  transition: all 0.15s;\\n\\n  &:hover {\\n    opacity: 1;\\n    color: #3b82f6;\\n  }\\n}\\n\\n.tree-nodes {\\n  padding: 4px;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 2px;\\n}\\n\\n.empty-state {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  padding: 60px 20px;\\n  color: var(--SmartThemeBodyColor, #888);\\n  opacity: 0.6;\\n\\n  i {\\n    font-size: 56px;\\n    margin-bottom: 16px;\\n  }\\n\\n  p {\\n    margin: 0;\\n    font-size: 15px;\\n  }\\n}\\n\\n// 列表动画\\n.list-enter-active,\\n.list-leave-active {\\n  transition: all 0.2s ease;\\n}\\n\\n.list-enter-from,\\n.list-leave-to {\\n  opacity: 0;\\n  transform: translateX(-10px);\\n}\\n\\n.list-move {\\n  transition: transform 0.2s ease;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nexport default function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nimport listToStyles from './listToStyles'\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nexport default function addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-169.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.1_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ChatCard.vue?vue&type=style&index=0&id=1384f147&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"4fc66874\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-169.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.1_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ChatCard.vue?vue&type=style&index=0&id=1384f147&lang=scss&scoped=true\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-169.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.1_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ChatCard.vue?vue&type=style&index=0&id=1384f147&lang=scss&scoped=true\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-169.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.1_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ForestView.vue?vue&type=style&index=0&id=492ea9d4&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7f613894\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-169.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.1_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ForestView.vue?vue&type=style&index=0&id=492ea9d4&lang=scss&scoped=true\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-169.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.1_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ForestView.vue?vue&type=style&index=0&id=492ea9d4&lang=scss&scoped=true\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.chat-card[data-v-1384f147]{display:flex;align-items:center;gap:8px;padding:8px;padding-left:8px;border-radius:6px;cursor:pointer;transition:background-color .15s ease;position:relative}.chat-card[data-v-1384f147]:hover{background-color:hsla(0,0%,100%,.05)}.chat-card.is-selected[data-v-1384f147]{background-color:rgba(59,130,246,.15)}.chat-card.is-current[data-v-1384f147]{border-left:3px solid #22c55e;background-color:rgba(34,197,94,.1)}.chat-card.is-checkpoint[data-v-1384f147]{opacity:.8}.expand-btn[data-v-1384f147]{width:20px;height:20px;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0);border:none;color:var(--SmartThemeBodyColor,#ccc);cursor:pointer;opacity:.7}.expand-btn[data-v-1384f147]:hover{opacity:1}.expand-placeholder[data-v-1384f147]{width:20px}.tree-lines[data-v-1384f147]{position:relative;height:100%;flex-shrink:0}.tree-line[data-v-1384f147]{position:absolute;top:0;bottom:0;width:1px;background:rgba(0,0,0,0)}.tree-line.has-continuation[data-v-1384f147]{background:rgba(0,200,200,.5)}.tree-branch[data-v-1384f147]{position:absolute;width:10px;height:1px;top:50%;background:rgba(0,200,200,.5)}.tree-branch[data-v-1384f147]::before{content:\"\";position:absolute;left:0;width:1px;background:rgba(0,200,200,.5)}.tree-branch[data-v-1384f147]:not(.is-last)::before{top:-50vh;bottom:0;height:calc(50vh + 1px)}.tree-branch.is-last[data-v-1384f147]::before{bottom:0;height:50vh;top:auto;transform:translateY(-100%)}input[type=checkbox][data-v-1384f147]{width:16px;height:16px;cursor:pointer}.chat-icon[data-v-1384f147]{color:var(--SmartThemeBodyColor,#aaa);font-size:14px}.chat-info[data-v-1384f147]{flex:1;min-width:0;display:flex;flex-direction:column;gap:2px}.chat-header[data-v-1384f147]{display:flex;align-items:center;gap:6px}.chat-name[data-v-1384f147]{font-weight:500;color:var(--SmartThemeBodyColor,#fff);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.current-badge[data-v-1384f147],.checkpoint-badge[data-v-1384f147]{font-size:10px;padding:1px 4px;border-radius:3px;font-weight:500}.current-badge[data-v-1384f147]{background-color:#22c55e;color:#fff}.checkpoint-badge[data-v-1384f147]{background-color:#f59e0b;color:#fff}.chat-meta[data-v-1384f147]{display:flex;gap:12px;font-size:11px;color:var(--SmartThemeBodyColor,#888);opacity:.7}.chat-meta i[data-v-1384f147]{margin-right:3px}.chat-preview[data-v-1384f147]{font-size:12px;color:var(--SmartThemeBodyColor,#999);opacity:.6;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.chat-actions[data-v-1384f147]{display:flex;gap:4px;opacity:0;transition:opacity .15s ease}.chat-card:hover .chat-actions[data-v-1384f147]{opacity:1}.action-btn[data-v-1384f147]{width:28px;height:28px;display:flex;align-items:center;justify-content:center;background:hsla(0,0%,100%,.1);border:none;border-radius:4px;color:var(--SmartThemeBodyColor,#ccc);cursor:pointer;transition:all .15s ease}.action-btn[data-v-1384f147]:hover{background:hsla(0,0%,100%,.2)}.action-btn.danger[data-v-1384f147]:hover{background:rgba(239,68,68,.3);color:#ef4444}.action-btn[data-v-1384f147]:disabled{opacity:.3;cursor:not-allowed}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/聊天管理器/components/ChatCard.vue\"],\"names\":[],\"mappings\":\"AACA,4BACE,YAAA,CACA,kBAAA,CACA,OAAA,CACA,WAAA,CACA,gBAAA,CACA,iBAAA,CACA,cAAA,CACA,qCAAA,CACA,iBAAA,CAEA,kCACE,oCAAA,CAGF,wCACE,qCAAA,CAGF,uCACE,6BAAA,CACA,mCAAA,CAGF,0CACE,UAAA,CAIJ,6BACE,UAAA,CACA,WAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,wBAAA,CACA,WAAA,CACA,qCAAA,CACA,cAAA,CACA,UAAA,CAEA,mCACE,SAAA,CAIJ,qCACE,UAAA,CAIF,6BACE,iBAAA,CACA,WAAA,CACA,aAAA,CAIF,4BACE,iBAAA,CACA,KAAA,CACA,QAAA,CACA,SAAA,CACA,wBAAA,CAEA,6CACE,6BAAA,CAKJ,8BACE,iBAAA,CACA,UAAA,CACA,UAAA,CACA,OAAA,CACA,6BAAA,CAEA,sCACE,UAAA,CACA,iBAAA,CACA,MAAA,CACA,SAAA,CACA,6BAAA,CAIF,oDACE,SAAA,CACA,QAAA,CACA,uBAAA,CAIF,8CACE,QAAA,CACA,WAAA,CACA,QAAA,CACA,2BAAA,CAIJ,sCACE,UAAA,CACA,WAAA,CACA,cAAA,CAGF,4BACE,qCAAA,CACA,cAAA,CAGF,4BACE,MAAA,CACA,WAAA,CACA,YAAA,CACA,qBAAA,CACA,OAAA,CAGF,8BACE,YAAA,CACA,kBAAA,CACA,OAAA,CAGF,4BACE,eAAA,CACA,qCAAA,CACA,eAAA,CACA,sBAAA,CACA,kBAAA,CAGF,mEAEE,cAAA,CACA,eAAA,CACA,iBAAA,CACA,eAAA,CAGF,gCACE,wBAAA,CACA,UAAA,CAGF,mCACE,wBAAA,CACA,UAAA,CAGF,4BACE,YAAA,CACA,QAAA,CACA,cAAA,CACA,qCAAA,CACA,UAAA,CAEA,8BACE,gBAAA,CAIJ,+BACE,cAAA,CACA,qCAAA,CACA,UAAA,CACA,eAAA,CACA,sBAAA,CACA,kBAAA,CAGF,+BACE,YAAA,CACA,OAAA,CACA,SAAA,CACA,4BAAA,CAEA,gDACE,SAAA,CAIJ,6BACE,UAAA,CACA,WAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,6BAAA,CACA,WAAA,CACA,iBAAA,CACA,qCAAA,CACA,cAAA,CACA,wBAAA,CAEA,mCACE,6BAAA,CAGF,0CACE,6BAAA,CACA,aAAA,CAGF,sCACE,UAAA,CACA,kBAAA\",\"sourcesContent\":[\"\\n.chat-card {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  padding: 8px;\\n  padding-left: 8px;\\n  border-radius: 6px;\\n  cursor: pointer;\\n  transition: background-color 0.15s ease;\\n  position: relative;\\n\\n  &:hover {\\n    background-color: rgba(255, 255, 255, 0.05);\\n  }\\n\\n  &.is-selected {\\n    background-color: rgba(59, 130, 246, 0.15);\\n  }\\n\\n  &.is-current {\\n    border-left: 3px solid #22c55e;\\n    background-color: rgba(34, 197, 94, 0.1);\\n  }\\n\\n  &.is-checkpoint {\\n    opacity: 0.8;\\n  }\\n}\\n\\n.expand-btn {\\n  width: 20px;\\n  height: 20px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background: transparent;\\n  border: none;\\n  color: var(--SmartThemeBodyColor, #ccc);\\n  cursor: pointer;\\n  opacity: 0.7;\\n\\n  &:hover {\\n    opacity: 1;\\n  }\\n}\\n\\n.expand-placeholder {\\n  width: 20px;\\n}\\n\\n// 树形连接线容器\\n.tree-lines {\\n  position: relative;\\n  height: 100%;\\n  flex-shrink: 0;\\n}\\n\\n// 垂直线\\n.tree-line {\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  width: 1px;\\n  background: transparent;\\n\\n  &.has-continuation {\\n    background: rgba(0, 200, 200, 0.5);\\n  }\\n}\\n\\n// 水平分支线\\n.tree-branch {\\n  position: absolute;\\n  width: 10px;\\n  height: 1px;\\n  top: 50%;\\n  background: rgba(0, 200, 200, 0.5);\\n\\n  &::before {\\n    content: '';\\n    position: absolute;\\n    left: 0;\\n    width: 1px;\\n    background: rgba(0, 200, 200, 0.5);\\n  }\\n\\n  // 非最后一个子节点：垂直线从上到下\\n  &:not(.is-last)::before {\\n    top: -50vh;\\n    bottom: 0;\\n    height: calc(50vh + 1px);\\n  }\\n\\n  // 最后一个子节点：垂直线只到中点\\n  &.is-last::before {\\n    bottom: 0;\\n    height: 50vh;\\n    top: auto;\\n    transform: translateY(-100%);\\n  }\\n}\\n\\ninput[type='checkbox'] {\\n  width: 16px;\\n  height: 16px;\\n  cursor: pointer;\\n}\\n\\n.chat-icon {\\n  color: var(--SmartThemeBodyColor, #aaa);\\n  font-size: 14px;\\n}\\n\\n.chat-info {\\n  flex: 1;\\n  min-width: 0;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 2px;\\n}\\n\\n.chat-header {\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n}\\n\\n.chat-name {\\n  font-weight: 500;\\n  color: var(--SmartThemeBodyColor, #fff);\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n}\\n\\n.current-badge,\\n.checkpoint-badge {\\n  font-size: 10px;\\n  padding: 1px 4px;\\n  border-radius: 3px;\\n  font-weight: 500;\\n}\\n\\n.current-badge {\\n  background-color: #22c55e;\\n  color: #fff;\\n}\\n\\n.checkpoint-badge {\\n  background-color: #f59e0b;\\n  color: #fff;\\n}\\n\\n.chat-meta {\\n  display: flex;\\n  gap: 12px;\\n  font-size: 11px;\\n  color: var(--SmartThemeBodyColor, #888);\\n  opacity: 0.7;\\n\\n  i {\\n    margin-right: 3px;\\n  }\\n}\\n\\n.chat-preview {\\n  font-size: 12px;\\n  color: var(--SmartThemeBodyColor, #999);\\n  opacity: 0.6;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n}\\n\\n.chat-actions {\\n  display: flex;\\n  gap: 4px;\\n  opacity: 0;\\n  transition: opacity 0.15s ease;\\n\\n  .chat-card:hover & {\\n    opacity: 1;\\n  }\\n}\\n\\n.action-btn {\\n  width: 28px;\\n  height: 28px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background: rgba(255, 255, 255, 0.1);\\n  border: none;\\n  border-radius: 4px;\\n  color: var(--SmartThemeBodyColor, #ccc);\\n  cursor: pointer;\\n  transition: all 0.15s ease;\\n\\n  &:hover {\\n    background: rgba(255, 255, 255, 0.2);\\n  }\\n\\n  &.danger:hover {\\n    background: rgba(239, 68, 68, 0.3);\\n    color: #ef4444;\\n  }\\n\\n  &:disabled {\\n    opacity: 0.3;\\n    cursor: not-allowed;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.chat-manager-panel[data-v-34a25112]{display:flex;flex-direction:column;width:95vw;max-width:1200px;height:90vh;background:var(--SmartThemeBlurTintColor,#1a1a2e);border-radius:12px;box-shadow:0 8px 32px rgba(0,0,0,.4);overflow:hidden;color:var(--SmartThemeBodyColor,#e0e0e0)}.panel-header[data-v-34a25112]{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;background:rgba(0,0,0,.2);border-bottom:1px solid hsla(0,0%,100%,.1)}.panel-header h2[data-v-34a25112]{margin:0;font-size:18px;font-weight:600;display:flex;align-items:center;gap:8px}.panel-header h2 i[data-v-34a25112]{opacity:.8}.close-btn[data-v-34a25112]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0);border:none;color:var(--SmartThemeBodyColor,#ccc);cursor:pointer;border-radius:6px;transition:background .15s}.close-btn[data-v-34a25112]:hover{background:hsla(0,0%,100%,.1)}.toolbar[data-v-34a25112]{display:flex;align-items:center;gap:12px;padding:12px 16px;border-bottom:1px solid hsla(0,0%,100%,.05)}.search-box[data-v-34a25112]{flex:1;display:flex;align-items:center;gap:8px;padding:8px 12px;background:hsla(0,0%,100%,.05);border-radius:8px;border:1px solid hsla(0,0%,100%,.1)}.search-box i[data-v-34a25112]{opacity:.5}.search-box input[data-v-34a25112]{flex:1;background:rgba(0,0,0,0);border:none;outline:none;color:inherit;font-size:14px}.search-box input[data-v-34a25112]::placeholder{color:var(--SmartThemeBodyColor,#888);opacity:.5}.clear-btn[data-v-34a25112]{background:rgba(0,0,0,0);border:none;color:var(--SmartThemeBodyColor,#888);cursor:pointer;opacity:.6}.clear-btn[data-v-34a25112]:hover{opacity:1}.toolbar-actions[data-v-34a25112]{display:flex;align-items:center;gap:8px}.sort-select[data-v-34a25112]{padding:6px 10px;background:hsla(0,0%,100%,.05);border:1px solid hsla(0,0%,100%,.1);border-radius:6px;color:inherit;font-size:13px;cursor:pointer}.sort-select option[data-v-34a25112]{background:var(--SmartThemeBlurTintColor,#1a1a2e)}.icon-btn[data-v-34a25112]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:hsla(0,0%,100%,.05);border:1px solid hsla(0,0%,100%,.1);border-radius:6px;color:var(--SmartThemeBodyColor,#ccc);cursor:pointer;transition:all .15s}.icon-btn[data-v-34a25112]:hover{background:hsla(0,0%,100%,.1)}.batch-bar[data-v-34a25112]{display:flex;align-items:center;justify-content:space-between;padding:8px 16px;background:rgba(0,0,0,.1);border-bottom:1px solid hsla(0,0%,100%,.05)}.select-all[data-v-34a25112]{display:flex;align-items:center;gap:6px;cursor:pointer;font-size:13px}.select-all input[data-v-34a25112]{cursor:pointer}.batch-actions[data-v-34a25112]{display:flex;gap:8px}.batch-btn[data-v-34a25112]{display:flex;align-items:center;gap:4px;padding:6px 10px;background:hsla(0,0%,100%,.05);border:1px solid hsla(0,0%,100%,.1);border-radius:6px;color:var(--SmartThemeBodyColor,#ccc);font-size:12px;cursor:pointer;transition:all .15s}.batch-btn[data-v-34a25112]:hover:not(:disabled){background:hsla(0,0%,100%,.1)}.batch-btn[data-v-34a25112]:disabled{opacity:.4;cursor:not-allowed}.batch-btn.danger[data-v-34a25112]:hover:not(:disabled){background:rgba(239,68,68,.2);border-color:rgba(239,68,68,.3);color:#ef4444}.status-bar[data-v-34a25112]{display:flex;align-items:center;justify-content:space-between;padding:10px 16px;font-size:12px;color:var(--SmartThemeBodyColor,#888);opacity:.7;border-top:1px solid hsla(0,0%,100%,.05);background:rgba(0,0,0,.1)}.status-bar .error[data-v-34a25112]{color:#ef4444;opacity:1}.status-bar .error i[data-v-34a25112]{margin-right:4px}.status-bar .cache-info[data-v-34a25112]{display:flex;align-items:center;gap:6px}.status-bar .cache-info i[data-v-34a25112]{margin-right:3px}.status-bar .refreshing-indicator[data-v-34a25112]{background:rgba(0,0,0,0);border:none;color:inherit;padding:0;margin-left:4px}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/聊天管理器/components/MainPanel.vue\"],\"names\":[],\"mappings\":\"AACA,qCACE,YAAA,CACA,qBAAA,CACA,UAAA,CACA,gBAAA,CACA,WAAA,CACA,iDAAA,CACA,kBAAA,CACA,oCAAA,CACA,eAAA,CACA,wCAAA,CAGF,+BACE,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,iBAAA,CACA,yBAAA,CACA,0CAAA,CAEA,kCACE,QAAA,CACA,cAAA,CACA,eAAA,CACA,YAAA,CACA,kBAAA,CACA,OAAA,CAEA,oCACE,UAAA,CAKN,4BACE,UAAA,CACA,WAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,wBAAA,CACA,WAAA,CACA,qCAAA,CACA,cAAA,CACA,iBAAA,CACA,0BAAA,CAEA,kCACE,6BAAA,CAIJ,0BACE,YAAA,CACA,kBAAA,CACA,QAAA,CACA,iBAAA,CACA,2CAAA,CAGF,6BACE,MAAA,CACA,YAAA,CACA,kBAAA,CACA,OAAA,CACA,gBAAA,CACA,8BAAA,CACA,iBAAA,CACA,mCAAA,CAEA,+BACE,UAAA,CAGF,mCACE,MAAA,CACA,wBAAA,CACA,WAAA,CACA,YAAA,CACA,aAAA,CACA,cAAA,CAEA,gDACE,qCAAA,CACA,UAAA,CAKN,4BACE,wBAAA,CACA,WAAA,CACA,qCAAA,CACA,cAAA,CACA,UAAA,CAEA,kCACE,SAAA,CAIJ,kCACE,YAAA,CACA,kBAAA,CACA,OAAA,CAGF,8BACE,gBAAA,CACA,8BAAA,CACA,mCAAA,CACA,iBAAA,CACA,aAAA,CACA,cAAA,CACA,cAAA,CAEA,qCACE,iDAAA,CAIJ,2BACE,UAAA,CACA,WAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,8BAAA,CACA,mCAAA,CACA,iBAAA,CACA,qCAAA,CACA,cAAA,CACA,mBAAA,CAEA,iCACE,6BAAA,CAIJ,4BACE,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,gBAAA,CACA,yBAAA,CACA,2CAAA,CAGF,6BACE,YAAA,CACA,kBAAA,CACA,OAAA,CACA,cAAA,CACA,cAAA,CAEA,mCACE,cAAA,CAIJ,gCACE,YAAA,CACA,OAAA,CAGF,4BACE,YAAA,CACA,kBAAA,CACA,OAAA,CACA,gBAAA,CACA,8BAAA,CACA,mCAAA,CACA,iBAAA,CACA,qCAAA,CACA,cAAA,CACA,cAAA,CACA,mBAAA,CAEA,iDACE,6BAAA,CAGF,qCACE,UAAA,CACA,kBAAA,CAGF,wDACE,6BAAA,CACA,+BAAA,CACA,aAAA,CAIJ,6BACE,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,iBAAA,CACA,cAAA,CACA,qCAAA,CACA,UAAA,CACA,wCAAA,CACA,yBAAA,CAEA,oCACE,aAAA,CACA,SAAA,CAEA,sCACE,gBAAA,CAIJ,yCACE,YAAA,CACA,kBAAA,CACA,OAAA,CAEA,2CACE,gBAAA,CAIJ,mDACE,wBAAA,CACA,WAAA,CACA,aAAA,CACA,SAAA,CACA,eAAA\",\"sourcesContent\":[\"\\n.chat-manager-panel {\\n  display: flex;\\n  flex-direction: column;\\n  width: 95vw;\\n  max-width: 1200px;\\n  height: 90vh;\\n  background: var(--SmartThemeBlurTintColor, #1a1a2e);\\n  border-radius: 12px;\\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);\\n  overflow: hidden;\\n  color: var(--SmartThemeBodyColor, #e0e0e0);\\n}\\n\\n.panel-header {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding: 16px 20px;\\n  background: rgba(0, 0, 0, 0.2);\\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\\n\\n  h2 {\\n    margin: 0;\\n    font-size: 18px;\\n    font-weight: 600;\\n    display: flex;\\n    align-items: center;\\n    gap: 8px;\\n\\n    i {\\n      opacity: 0.8;\\n    }\\n  }\\n}\\n\\n.close-btn {\\n  width: 32px;\\n  height: 32px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background: transparent;\\n  border: none;\\n  color: var(--SmartThemeBodyColor, #ccc);\\n  cursor: pointer;\\n  border-radius: 6px;\\n  transition: background 0.15s;\\n\\n  &:hover {\\n    background: rgba(255, 255, 255, 0.1);\\n  }\\n}\\n\\n.toolbar {\\n  display: flex;\\n  align-items: center;\\n  gap: 12px;\\n  padding: 12px 16px;\\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\\n}\\n\\n.search-box {\\n  flex: 1;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  padding: 8px 12px;\\n  background: rgba(255, 255, 255, 0.05);\\n  border-radius: 8px;\\n  border: 1px solid rgba(255, 255, 255, 0.1);\\n\\n  i {\\n    opacity: 0.5;\\n  }\\n\\n  input {\\n    flex: 1;\\n    background: transparent;\\n    border: none;\\n    outline: none;\\n    color: inherit;\\n    font-size: 14px;\\n\\n    &::placeholder {\\n      color: var(--SmartThemeBodyColor, #888);\\n      opacity: 0.5;\\n    }\\n  }\\n}\\n\\n.clear-btn {\\n  background: transparent;\\n  border: none;\\n  color: var(--SmartThemeBodyColor, #888);\\n  cursor: pointer;\\n  opacity: 0.6;\\n\\n  &:hover {\\n    opacity: 1;\\n  }\\n}\\n\\n.toolbar-actions {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.sort-select {\\n  padding: 6px 10px;\\n  background: rgba(255, 255, 255, 0.05);\\n  border: 1px solid rgba(255, 255, 255, 0.1);\\n  border-radius: 6px;\\n  color: inherit;\\n  font-size: 13px;\\n  cursor: pointer;\\n\\n  option {\\n    background: var(--SmartThemeBlurTintColor, #1a1a2e);\\n  }\\n}\\n\\n.icon-btn {\\n  width: 32px;\\n  height: 32px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  background: rgba(255, 255, 255, 0.05);\\n  border: 1px solid rgba(255, 255, 255, 0.1);\\n  border-radius: 6px;\\n  color: var(--SmartThemeBodyColor, #ccc);\\n  cursor: pointer;\\n  transition: all 0.15s;\\n\\n  &:hover {\\n    background: rgba(255, 255, 255, 0.1);\\n  }\\n}\\n\\n.batch-bar {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding: 8px 16px;\\n  background: rgba(0, 0, 0, 0.1);\\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\\n}\\n\\n.select-all {\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n  cursor: pointer;\\n  font-size: 13px;\\n\\n  input {\\n    cursor: pointer;\\n  }\\n}\\n\\n.batch-actions {\\n  display: flex;\\n  gap: 8px;\\n}\\n\\n.batch-btn {\\n  display: flex;\\n  align-items: center;\\n  gap: 4px;\\n  padding: 6px 10px;\\n  background: rgba(255, 255, 255, 0.05);\\n  border: 1px solid rgba(255, 255, 255, 0.1);\\n  border-radius: 6px;\\n  color: var(--SmartThemeBodyColor, #ccc);\\n  font-size: 12px;\\n  cursor: pointer;\\n  transition: all 0.15s;\\n\\n  &:hover:not(:disabled) {\\n    background: rgba(255, 255, 255, 0.1);\\n  }\\n\\n  &:disabled {\\n    opacity: 0.4;\\n    cursor: not-allowed;\\n  }\\n\\n  &.danger:hover:not(:disabled) {\\n    background: rgba(239, 68, 68, 0.2);\\n    border-color: rgba(239, 68, 68, 0.3);\\n    color: #ef4444;\\n  }\\n}\\n\\n.status-bar {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding: 10px 16px;\\n  font-size: 12px;\\n  color: var(--SmartThemeBodyColor, #888);\\n  opacity: 0.7;\\n  border-top: 1px solid rgba(255, 255, 255, 0.05);\\n  background: rgba(0, 0, 0, 0.1);\\n\\n  .error {\\n    color: #ef4444;\\n    opacity: 1;\\n\\n    i {\\n      margin-right: 4px;\\n    }\\n  }\\n\\n  .cache-info {\\n    display: flex;\\n    align-items: center;\\n    gap: 6px;\\n\\n    i {\\n      margin-right: 3px;\\n    }\\n  }\\n\\n  .refreshing-indicator {\\n    background: transparent;\\n    border: none;\\n    color: inherit;\\n    padding: 0;\\n    margin-left: 4px;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","import type { ChatInfo } from './types';\n\n/**\n * 清理文件名中重复的 .jsonl 后缀\n * 返回基础名称（不带后缀）和完整文件名（只有一个 .jsonl 后缀）\n */\nfunction cleanFileName(name: string): { base: string; full: string } {\n  let base = name;\n  // 移除所有 .jsonl 后缀\n  while (base.endsWith('.jsonl')) {\n    base = base.slice(0, -6);\n  }\n  return {\n    base,\n    full: `${base}.jsonl`,\n  };\n}\n\n/**\n * 解析聊天文件名中的时间戳\n * 酒馆聊天文件名格式通常为: 角色名 - 时间戳.jsonl\n */\nfunction parseFileTimestamp(file_name: string): Date | null {\n  // 尝试匹配常见的时间戳格式\n  const patterns = [\n    /(\\d{4}-\\d{2}-\\d{2})@(\\d{2})h(\\d{2})m(\\d{2})s/, // 2024-12-28@10h30m45s\n    /(\\d{4})(\\d{2})(\\d{2})-(\\d{2})(\\d{2})(\\d{2})/, // 20241228-103045\n    /(\\d{13})/, // Unix timestamp in ms\n  ];\n\n  for (const pattern of patterns) {\n    const match = file_name.match(pattern);\n    if (match) {\n      if (pattern === patterns[0]) {\n        const [, date, h, m, s] = match;\n        return new Date(`${date}T${h}:${m}:${s}`);\n      } else if (pattern === patterns[1]) {\n        const [, y, mo, d, h, mi, s] = match;\n        return new Date(`${y}-${mo}-${d}T${h}:${mi}:${s}`);\n      } else if (pattern === patterns[2]) {\n        return new Date(parseInt(match[1]));\n      }\n    }\n  }\n  return null;\n}\n\n/**\n * 提取显示名称（去除时间戳和扩展名）\n */\nfunction extractDisplayName(file_name: string, char_name: string): string {\n  let name = file_name\n    .replace(/\\.jsonl?$/, '')\n    .replace(/\\d{4}-\\d{2}-\\d{2}@\\d{2}h\\d{2}m\\d{2}s\\s*\\d*ms/, '')\n    .replace(/\\d{13}/, '')\n    .replace(new RegExp(`^${_.escapeRegExp(char_name)}\\\\s*-?\\\\s*`), '')\n    .trim();\n\n  if (!name) {\n    name = file_name.replace(/\\.jsonl?$/, '');\n  }\n\n  return name || '未命名聊天';\n}\n\n/**\n * 截取消息预览\n */\nfunction truncatePreview(message: string, max_length: number): string {\n  if (!message) return '';\n\n  // 移除 markdown 和 HTML 标签\n  const clean = message\n    .replace(/<[^>]+>/g, '')\n    .replace(/\\*\\*([^*]+)\\*\\*/g, '$1')\n    .replace(/\\*([^*]+)\\*/g, '$1')\n    .replace(/```[\\s\\S]*?```/g, '[代码块]')\n    .replace(/`([^`]+)`/g, '$1')\n    .replace(/\\n+/g, ' ')\n    .trim();\n\n  if (clean.length <= max_length) return clean;\n  return clean.slice(0, max_length) + '...';\n}\n\n/**\n * 检测是否为分支/检查点聊天\n */\nfunction detectBranchInfo(file_name: string): { is_checkpoint: boolean; parent_hint?: string } {\n  const is_checkpoint = file_name.includes('checkpoint') || file_name.includes('_cp_');\n  const branch_match = file_name.match(/_branch_from_(.+?)(?:_|\\.)/);\n\n  return {\n    is_checkpoint,\n    parent_hint: branch_match?.[1],\n  };\n}\n\n/**\n * 使用 SillyTavern 原生 API 获取带 metadata 的聊天列表\n * 这样可以获取 chat_metadata.main_chat 来确定分支关系\n */\nasync function fetchChatsWithMetadata(): Promise<any[]> {\n  try {\n    const response = await fetch('/api/chats/recent', {\n      method: 'POST',\n      headers: SillyTavern.getRequestHeaders(),\n      body: JSON.stringify({ metadata: true, max: 9999 }),\n    });\n\n    if (!response.ok) {\n      console.warn('[聊天管理器] 获取聊天 metadata 失败:', response.status);\n      return [];\n    }\n\n    return await response.json();\n  } catch (e) {\n    console.error('[聊天管理器] 获取聊天 metadata 出错:', e);\n    return [];\n  }\n}\n\n/**\n * 获取当前角色的所有聊天记录\n * 使用 SillyTavern 原生 API 获取带 metadata 的聊天列表\n * 以便获取 chat_metadata.main_chat 确定分支关系\n */\nexport async function fetchChatList(preview_length = 100): Promise<ChatInfo[]> {\n  const char_data = getCharData('current');\n  if (!char_data) {\n    console.warn('[聊天管理器] 未选择角色卡');\n    return [];\n  }\n\n  const char_name = char_data.name;\n  const char_avatar = char_data.avatar;\n  const current_chat = char_data.chat;\n  console.info('[聊天管理器] 当前角色:', char_name, '当前聊天:', current_chat);\n\n  // 使用原生 API 获取带 metadata 的聊天列表\n  const all_chats = await fetchChatsWithMetadata();\n\n  // 筛选当前角色的聊天\n  const char_chats = all_chats.filter((c: any) => c.avatar === char_avatar);\n\n  if (char_chats.length === 0) {\n    // 回退到 getChatHistoryBrief\n    console.info('[聊天管理器] 原生 API 无数据，回退到 getChatHistoryBrief');\n    const chat_briefs = await getChatHistoryBrief('current');\n    if (!chat_briefs || chat_briefs.length === 0) {\n      console.info('[聊天管理器] 该角色没有聊天记录');\n      return [];\n    }\n    return parseBriefChats(chat_briefs, char_name, current_chat, preview_length);\n  }\n\n  console.info('[聊天管理器] 获取到', char_chats.length, '个聊天记录 (带 metadata)');\n\n  const result: ChatInfo[] = [];\n\n  for (const chat of char_chats) {\n    // 使用统一的清理函数处理 file_id\n    const raw_file_id = chat.file_id as string;\n    const { base: file_id, full: file_name } = cleanFileName(raw_file_id);\n\n    console.debug(`[聊天管理器] 清理文件名: \"${raw_file_id}\" -> file_id=\"${file_id}\", file_name=\"${file_name}\"`);\n\n    const message_count = chat.chat_items || 0;\n    const mes_preview = chat.mes || '';\n\n    // 从 chat_metadata 获取父聊天\n    const main_chat = chat.chat_metadata?.main_chat as string | undefined;\n\n    const { is_checkpoint } = detectBranchInfo(file_name);\n\n    // 解析时间\n    const file_timestamp = parseFileTimestamp(file_name);\n    const created_at = file_timestamp || new Date();\n\n    result.push({\n      file_id,\n      file_name,\n      display_name: extractDisplayName(file_name, char_name),\n      created_at,\n      updated_at: created_at,\n      message_count,\n      first_message_preview: truncatePreview(mes_preview, preview_length),\n      last_message_preview: truncatePreview(mes_preview, preview_length),\n      parent_chat: main_chat, // 使用 chat_metadata.main_chat\n      is_checkpoint,\n      is_current: file_id === current_chat || file_name === current_chat,\n    });\n  }\n\n  console.info('[聊天管理器] 解析完成，共', result.length, '个聊天记录');\n  return result;\n}\n\n/**\n * 解析 brief 格式的聊天数据（回退方案）\n */\nfunction parseBriefChats(\n  chat_briefs: any[],\n  char_name: string,\n  current_chat: string,\n  preview_length: number,\n): ChatInfo[] {\n  const result: ChatInfo[] = [];\n\n  for (const brief of chat_briefs) {\n    // 使用统一的清理函数处理\n    const raw_file_id = brief.file_id as string;\n    const { base: file_id, full: file_name } = cleanFileName(raw_file_id);\n\n    const message_count = brief.chat_items || 0;\n    const mes_preview = brief.mes || '';\n\n    const { is_checkpoint, parent_hint } = detectBranchInfo(file_name);\n\n    const file_timestamp = parseFileTimestamp(file_name);\n    const created_at = file_timestamp || new Date();\n\n    result.push({\n      file_id,\n      file_name,\n      display_name: extractDisplayName(file_name, char_name),\n      created_at,\n      updated_at: created_at,\n      message_count,\n      first_message_preview: truncatePreview(mes_preview, preview_length),\n      last_message_preview: truncatePreview(mes_preview, preview_length),\n      parent_chat: parent_hint,\n      is_checkpoint,\n      is_current: file_id === current_chat || file_name === current_chat,\n    });\n  }\n\n  return result;\n}\n\n/**\n * 基于 chat_metadata.main_chat 检测分支关系\n *\n * 数据来源：fetchChatList 已经从 API 获取了 parent_chat 字段\n * 此函数仅需将 parent_chat（父聊天 file_name）转换为 file_id\n *\n * @returns Map<子file_id, 父file_id>\n */\nexport async function detectBranchRelations(chats: ChatInfo[]): Promise<Map<string, string>> {\n  const relations = new Map<string, string>();\n\n  // 构建 file_name -> file_id 映射\n  const name_to_id = new Map<string, string>();\n  for (const chat of chats) {\n    // main_chat 存储的是不带扩展名的文件名\n    name_to_id.set(chat.file_id, chat.file_id);\n    name_to_id.set(chat.file_name, chat.file_id);\n    name_to_id.set(chat.file_name.replace(/\\.jsonl?$/, ''), chat.file_id);\n  }\n\n  // 建立分支关系\n  for (const chat of chats) {\n    if (chat.parent_chat) {\n      const parent_id = name_to_id.get(chat.parent_chat);\n      if (parent_id && parent_id !== chat.file_id) {\n        relations.set(chat.file_id, parent_id);\n        console.info(`[聊天管理器] 分支关系: ${chat.file_id} -> ${parent_id}`);\n      }\n    }\n  }\n\n  console.info(`[聊天管理器] 检测到 ${relations.size} 个分支关系`);\n  return relations;\n}\n","import { detectBranchRelations } from './chat-parser';\nimport type { ChatForest, ChatInfo, ChatTree, ChatTreeNode, SortConfig } from './types';\n\n/**\n * 根据排序配置对聊天列表排序\n */\nexport function sortChats(chats: ChatInfo[], config: SortConfig): ChatInfo[] {\n  const sorted = [...chats];\n  const multiplier = config.order === 'asc' ? 1 : -1;\n\n  sorted.sort((a, b) => {\n    switch (config.by) {\n      case 'updated_at':\n        return multiplier * (a.updated_at.getTime() - b.updated_at.getTime());\n      case 'created_at':\n        return multiplier * (a.created_at.getTime() - b.created_at.getTime());\n      case 'name':\n        return multiplier * a.display_name.localeCompare(b.display_name);\n      case 'message_count':\n        return multiplier * (a.message_count - b.message_count);\n      default:\n        return 0;\n    }\n  });\n\n  return sorted;\n}\n\n/**\n * 过滤聊天列表\n */\nexport function filterChats(\n  chats: ChatInfo[],\n  options: {\n    search?: string;\n    show_checkpoints?: boolean;\n  },\n): ChatInfo[] {\n  let result = [...chats];\n\n  if (options.show_checkpoints === false) {\n    result = result.filter(c => !c.is_checkpoint);\n  }\n\n  if (options.search?.trim()) {\n    const keyword = options.search.toLowerCase().trim();\n    result = result.filter(\n      c =>\n        c.display_name.toLowerCase().includes(keyword) ||\n        c.first_message_preview.toLowerCase().includes(keyword) ||\n        c.last_message_preview.toLowerCase().includes(keyword),\n    );\n  }\n\n  return result;\n}\n\n/**\n * 将扁平聊天列表构建为树形结构\n */\nexport async function buildChatTree(\n  chats: ChatInfo[],\n  options?: {\n    detect_branches?: boolean;\n    sort_config?: SortConfig;\n  },\n): Promise<ChatTreeNode[]> {\n  const { detect_branches = true, sort_config } = options || {};\n\n  // 先排序\n  const sorted_chats = sort_config ? sortChats(chats, sort_config) : chats;\n\n  // 检测分支关系\n  let relations = new Map<string, string>();\n  if (detect_branches) {\n    relations = await detectBranchRelations(sorted_chats);\n\n    // 更新 chat 的 parent_chat 字段（使用 file_id）\n    for (const chat of sorted_chats) {\n      if (!chat.parent_chat && relations.has(chat.file_id)) {\n        chat.parent_chat = relations.get(chat.file_id);\n      }\n    }\n  }\n\n  // 构建节点映射（使用 file_id 作为键）\n  const node_map = new Map<string, ChatTreeNode>();\n  for (const chat of sorted_chats) {\n    node_map.set(chat.file_id, {\n      chat,\n      children: [],\n      depth: 0,\n      is_expanded: false,\n      is_selected: false,\n    });\n  }\n\n  // 构建树结构\n  const roots: ChatTreeNode[] = [];\n\n  for (const chat of sorted_chats) {\n    const node = node_map.get(chat.file_id)!;\n\n    if (chat.parent_chat && node_map.has(chat.parent_chat)) {\n      const parent_node = node_map.get(chat.parent_chat)!;\n      node.depth = parent_node.depth + 1;\n      parent_node.children.push(node);\n    } else {\n      roots.push(node);\n    }\n  }\n\n  // 对每个节点的子节点进行排序\n  function sortChildren(node: ChatTreeNode) {\n    if (sort_config) {\n      node.children = sortChats(\n        node.children.map(n => n.chat),\n        sort_config,\n      ).map(c => node_map.get(c.file_id)!);\n    }\n    node.children.forEach(sortChildren);\n  }\n  roots.forEach(sortChildren);\n\n  return roots;\n}\n\n/**\n * 获取所有被选中的节点\n */\nexport function getSelectedNodes(nodes: ChatTreeNode[]): ChatTreeNode[] {\n  const selected: ChatTreeNode[] = [];\n\n  function traverse(node: ChatTreeNode) {\n    if (node.is_selected) {\n      selected.push(node);\n    }\n    node.children.forEach(traverse);\n  }\n\n  nodes.forEach(traverse);\n  return selected;\n}\n\n/**\n * 设置所有节点的选中状态\n */\nexport function setAllSelected(nodes: ChatTreeNode[], selected: boolean): void {\n  function traverse(node: ChatTreeNode) {\n    node.is_selected = selected;\n    node.children.forEach(traverse);\n  }\n\n  nodes.forEach(traverse);\n}\n\n/**\n * 展开/折叠所有节点\n */\nexport function setAllExpanded(nodes: ChatTreeNode[], expanded: boolean): void {\n  function traverse(node: ChatTreeNode) {\n    node.is_expanded = expanded;\n    node.children.forEach(traverse);\n  }\n\n  nodes.forEach(traverse);\n}\n\n/**\n * 统计节点总数\n */\nexport function countNodes(nodes: ChatTreeNode[]): number {\n  let count = 0;\n\n  function traverse(node: ChatTreeNode) {\n    count++;\n    node.children.forEach(traverse);\n  }\n\n  nodes.forEach(traverse);\n  return count;\n}\n\n/**\n * 将树形结构扁平化为列表\n */\nexport function flattenTree(nodes: ChatTreeNode[]): ChatTreeNode[] {\n  const result: ChatTreeNode[] = [];\n\n  function traverse(node: ChatTreeNode) {\n    result.push(node);\n    if (node.is_expanded) {\n      node.children.forEach(traverse);\n    }\n  }\n\n  nodes.forEach(traverse);\n  return result;\n}\n\n/**\n * 构建聊天森林 - 将多个独立的对话树分组显示\n * 每棵树按最新更新时间排序，树内节点也按时间排序（最新在前）\n */\nexport async function buildChatForest(\n  chats: ChatInfo[],\n  options?: {\n    detect_branches?: boolean;\n    sort_config?: SortConfig;\n  },\n): Promise<ChatForest> {\n  const { detect_branches = true, sort_config } = options || {};\n\n  // 先按时间排序（最新在前）\n  const effective_sort: SortConfig = sort_config || { by: 'updated_at', order: 'desc' };\n  const sorted_chats = sortChats(chats, effective_sort);\n\n  // 检测分支关系\n  let relations = new Map<string, string>();\n  if (detect_branches) {\n    relations = await detectBranchRelations(sorted_chats);\n\n    // 更新 chat 的 parent_chat 字段\n    for (const chat of sorted_chats) {\n      if (!chat.parent_chat && relations.has(chat.file_id)) {\n        chat.parent_chat = relations.get(chat.file_id);\n      }\n    }\n  }\n\n  // 构建节点映射\n  const node_map = new Map<string, ChatTreeNode>();\n  for (const chat of sorted_chats) {\n    node_map.set(chat.file_id, {\n      chat,\n      children: [],\n      depth: 0,\n      is_expanded: true, // 默认展开\n      is_selected: false,\n    });\n  }\n\n  // 构建树结构\n  const roots: ChatTreeNode[] = [];\n\n  for (const chat of sorted_chats) {\n    const node = node_map.get(chat.file_id)!;\n\n    if (chat.parent_chat && node_map.has(chat.parent_chat)) {\n      const parent_node = node_map.get(chat.parent_chat)!;\n      node.depth = parent_node.depth + 1;\n      parent_node.children.push(node);\n    } else {\n      roots.push(node);\n    }\n  }\n\n  // 对每个节点的子节点进行排序（最新在前）\n  function sortChildrenDesc(node: ChatTreeNode) {\n    if (node.children.length > 0) {\n      node.children.sort((a, b) => b.chat.updated_at.getTime() - a.chat.updated_at.getTime());\n      node.children.forEach(sortChildrenDesc);\n    }\n  }\n  roots.forEach(sortChildrenDesc);\n\n  // 将根节点转换为树结构\n  const trees: ChatTree[] = roots.map(root => {\n    const tree_nodes = flattenTreeAll(root);\n    const latest = tree_nodes.reduce(\n      (max, n) => (n.chat.updated_at > max ? n.chat.updated_at : max),\n      root.chat.updated_at,\n    );\n    const has_current = tree_nodes.some(n => n.chat.is_current);\n\n    return {\n      id: root.chat.file_id,\n      root,\n      display_name: root.chat.display_name,\n      node_count: tree_nodes.length,\n      latest_update: latest,\n      has_current,\n      is_expanded: has_current || tree_nodes.length <= 5, // 包含当前聊天或节点少时默认展开\n    };\n  });\n\n  // 按最新更新时间排序树（最新在前），包含当前聊天的树优先\n  trees.sort((a, b) => {\n    if (a.has_current && !b.has_current) return -1;\n    if (!a.has_current && b.has_current) return 1;\n    return b.latest_update.getTime() - a.latest_update.getTime();\n  });\n\n  return {\n    trees,\n    total_count: chats.length,\n  };\n}\n\n/**\n * 扁平化一棵树的所有节点（包括未展开的）\n */\nfunction flattenTreeAll(node: ChatTreeNode): ChatTreeNode[] {\n  const result: ChatTreeNode[] = [node];\n  for (const child of node.children) {\n    result.push(...flattenTreeAll(child));\n  }\n  return result;\n}\n\n/**\n * 统计森林中所有选中的节点\n */\nexport function getSelectedNodesFromForest(forest: ChatForest): ChatTreeNode[] {\n  const selected: ChatTreeNode[] = [];\n  for (const tree of forest.trees) {\n    selected.push(...getSelectedNodes([tree.root]));\n  }\n  return selected;\n}\n\n/**\n * 设置森林中所有节点的选中状态\n */\nexport function setAllSelectedInForest(forest: ChatForest, selected: boolean): void {\n  for (const tree of forest.trees) {\n    setAllSelected([tree.root], selected);\n  }\n}\n\n/**\n * 展开/折叠森林中所有树\n */\nexport function setAllTreesExpanded(forest: ChatForest, expanded: boolean): void {\n  for (const tree of forest.trees) {\n    tree.is_expanded = expanded;\n    setAllExpanded([tree.root], expanded);\n  }\n}\n\n/**\n * 统计森林中的总节点数\n */\nexport function countNodesInForest(forest: ChatForest): number {\n  return forest.total_count;\n}\n","/**\n * 聊天记录基本信息\n */\nexport interface ChatInfo {\n  /** 聊天 ID（不带扩展名，用于 API 调用） */\n  file_id: string;\n  /** 聊天文件名（带扩展名） */\n  file_name: string;\n  /** 显示名称（去除时间戳等） */\n  display_name: string;\n  /** 创建时间 */\n  created_at: Date;\n  /** 最后更新时间 */\n  updated_at: Date;\n  /** 消息总数 */\n  message_count: number;\n  /** 第一条消息预览 */\n  first_message_preview: string;\n  /** 最后消息预览 */\n  last_message_preview: string;\n  /** 父聊天文件名（如果是分支） */\n  parent_chat?: string;\n  /** 分支起点楼层号 */\n  branch_point?: number;\n  /** 是否为检查点聊天 */\n  is_checkpoint: boolean;\n  /** 是否为当前聊天 */\n  is_current: boolean;\n}\n\n/**\n * 聊天树节点\n */\nexport interface ChatTreeNode {\n  /** 聊天信息 */\n  chat: ChatInfo;\n  /** 子节点 */\n  children: ChatTreeNode[];\n  /** 树深度 */\n  depth: number;\n  /** 是否展开 */\n  is_expanded: boolean;\n  /** 是否被选中 */\n  is_selected: boolean;\n}\n\n/**\n * 排序方式\n */\nexport type SortBy = 'updated_at' | 'created_at' | 'name' | 'message_count';\n\n/**\n * 排序方向\n */\nexport type SortOrder = 'asc' | 'desc';\n\n/**\n * 排序配置\n */\nexport interface SortConfig {\n  by: SortBy;\n  order: SortOrder;\n}\n\n/**\n * 聊天管理器设置\n */\nexport interface ChatManagerSettings {\n  /** 默认排序方式 */\n  default_sort: SortConfig;\n  /** 预览文字长度 */\n  preview_length: number;\n  /** 是否显示检查点 */\n  show_checkpoints: boolean;\n  /** 删除确认开关 */\n  confirm_delete: boolean;\n}\n\n/**\n * 聊天管理器设置默认值\n */\nexport const DEFAULT_SETTINGS: ChatManagerSettings = {\n  default_sort: { by: 'updated_at', order: 'desc' },\n  preview_length: 50,\n  show_checkpoints: true,\n  confirm_delete: true,\n};\n\n/**\n * 聊天森林 - 一组独立的对话树\n */\nexport interface ChatForest {\n  /** 森林中的所有树（每棵树是一个根节点及其子节点） */\n  trees: ChatTree[];\n  /** 总聊天数 */\n  total_count: number;\n}\n\n/**\n * 聊天树 - 一棵独立的对话树\n */\nexport interface ChatTree {\n  /** 树的唯一标识（根节点的 file_id） */\n  id: string;\n  /** 根节点 */\n  root: ChatTreeNode;\n  /** 树的显示名称（取自根节点） */\n  display_name: string;\n  /** 树中的节点总数 */\n  node_count: number;\n  /** 树中最新的更新时间 */\n  latest_update: Date;\n  /** 是否包含当前聊天 */\n  has_current: boolean;\n  /** 是否展开 */\n  is_expanded: boolean;\n}\n\n/**\n * 缓存数据结构\n */\nexport interface ChatCache {\n  /** 缓存的聊天数据 */\n  chats: ChatInfo[];\n  /** 缓存时间戳 */\n  timestamp: number;\n  /** 对应的角色名 */\n  character: string;\n}\n\n/** 缓存有效期（5分钟） */\nexport const CACHE_TTL = 5 * 60 * 1000;\n","import { fetchChatList } from './data/chat-parser';\nimport { buildChatForest, countNodesInForest, filterChats, getSelectedNodesFromForest, setAllSelectedInForest, setAllTreesExpanded, } from './data/chat-tree';\nimport { DEFAULT_SETTINGS } from './data/types';\nconst SETTINGS_KEY = 'chat_manager_settings';\n// 全局缓存（跨组件实例保持）\nlet global_cache = null;\nexport const useChatManagerStore = defineStore('chat-manager', () => {\n    // 设置\n    const settings = ref((() => {\n        try {\n            const saved = getVariables({ type: 'global' })?.[SETTINGS_KEY];\n            return saved ? { ...DEFAULT_SETTINGS, ...saved } : { ...DEFAULT_SETTINGS };\n        }\n        catch {\n            return { ...DEFAULT_SETTINGS };\n        }\n    })());\n    // 状态\n    const is_loading = ref(false);\n    const is_background_loading = ref(false);\n    const error_message = ref(null);\n    const chats = ref([]);\n    const forest = ref({ trees: [], total_count: 0 });\n    const search_keyword = ref('');\n    const sort_config = ref(settings.value.default_sort);\n    const cache_time = ref(null);\n    // 计算属性\n    const filtered_chats = computed(() => filterChats(chats.value, {\n        search: search_keyword.value,\n        show_checkpoints: settings.value.show_checkpoints,\n    }));\n    const selected_nodes = computed(() => getSelectedNodesFromForest(forest.value));\n    const selected_count = computed(() => selected_nodes.value.length);\n    const total_count = computed(() => countNodesInForest(forest.value));\n    const current_chat = computed(() => chats.value.find(c => c.is_current));\n    // 缓存相关\n    function isCacheValid() {\n        if (!global_cache)\n            return false;\n        const char_data = getCharData('current');\n        if (!char_data)\n            return false;\n        const now = Date.now();\n        const is_same_char = global_cache.character === char_data.name;\n        const is_not_expired = now - global_cache.timestamp < 5 * 60 * 1000; // 5分钟\n        return is_same_char && is_not_expired;\n    }\n    function updateCache(new_chats) {\n        const char_data = getCharData('current');\n        if (!char_data)\n            return;\n        global_cache = {\n            chats: new_chats,\n            timestamp: Date.now(),\n            character: char_data.name,\n        };\n        cache_time.value = new Date();\n    }\n    // 方法\n    async function loadChats(force_refresh = false) {\n        error_message.value = null;\n        // 如果有有效缓存且不强制刷新，先显示缓存数据\n        if (!force_refresh && isCacheValid() && global_cache) {\n            console.info('[聊天管理器] 使用缓存数据');\n            chats.value = global_cache.chats;\n            cache_time.value = new Date(global_cache.timestamp);\n            await rebuildForest();\n            // 后台静默刷新\n            refreshInBackground();\n            return;\n        }\n        // 无缓存或强制刷新，显示加载状态\n        is_loading.value = true;\n        try {\n            const new_chats = await fetchChatList(settings.value.preview_length);\n            chats.value = new_chats;\n            updateCache(new_chats);\n            await rebuildForest();\n            console.info(`[聊天管理器] 已加载 ${chats.value.length} 个聊天记录`);\n        }\n        catch (e) {\n            error_message.value = e instanceof Error ? e.message : '加载聊天记录失败';\n            console.error('[聊天管理器]', error_message.value, e);\n        }\n        finally {\n            is_loading.value = false;\n        }\n    }\n    async function refreshInBackground() {\n        if (is_background_loading.value)\n            return;\n        is_background_loading.value = true;\n        try {\n            const new_chats = await fetchChatList(settings.value.preview_length);\n            // 检查数据是否有变化\n            if (JSON.stringify(new_chats.map(c => c.file_id)) !== JSON.stringify(chats.value.map(c => c.file_id))) {\n                console.info('[聊天管理器] 后台刷新检测到变化，更新视图');\n                chats.value = new_chats;\n                updateCache(new_chats);\n                await rebuildForest();\n            }\n            else {\n                // 更新缓存时间\n                updateCache(new_chats);\n            }\n        }\n        catch (e) {\n            console.warn('[聊天管理器] 后台刷新失败:', e);\n        }\n        finally {\n            is_background_loading.value = false;\n        }\n    }\n    async function rebuildForest() {\n        forest.value = await buildChatForest(filtered_chats.value, {\n            detect_branches: true,\n            sort_config: sort_config.value,\n        });\n    }\n    function selectAll(selected) {\n        setAllSelectedInForest(forest.value, selected);\n    }\n    function expandAll(expanded) {\n        setAllTreesExpanded(forest.value, expanded);\n    }\n    function invalidateCache() {\n        global_cache = null;\n        cache_time.value = null;\n    }\n    async function openChat(file_id) {\n        try {\n            // 使用 file_id（不带扩展名）调用 API\n            await SillyTavern.openCharacterChat(file_id);\n            toastr.success('已切换聊天');\n            // 更新当前聊天标记\n            for (const chat of chats.value) {\n                chat.is_current = chat.file_id === file_id;\n            }\n        }\n        catch (e) {\n            toastr.error('切换聊天失败');\n            console.error('[聊天管理器] 切换聊天失败:', e);\n        }\n    }\n    /**\n     * 使用原生 API 直接删除聊天，无需切换\n     */\n    async function deleteChatDirect(avatar_url, chat_file) {\n        console.log('[聊天管理器] deleteChatDirect 输入:', { avatar_url, chat_file });\n        // 确保文件名格式正确：移除所有 .jsonl 后缀（可能有多个），再添加一次\n        let base_name = chat_file;\n        let removed_count = 0;\n        while (base_name.endsWith('.jsonl')) {\n            base_name = base_name.slice(0, -6); // 移除 '.jsonl' (6个字符)\n            removed_count++;\n        }\n        const chatfile = `${base_name}.jsonl`;\n        console.log(`[聊天管理器] 文件名处理: 移除了 ${removed_count} 个 .jsonl, 最终: ${chatfile}`);\n        // 计算预期的服务器端路径（用于调试）\n        const expected_path = `chats/${avatar_url.replace('.png', '')}/${chatfile}`;\n        console.log(`[聊天管理器] 预期服务器路径: ${expected_path}`);\n        try {\n            // 构建请求头\n            const headers = SillyTavern.getRequestHeaders();\n            // 构建请求体\n            const body = { avatar_url, chatfile };\n            console.info(`[聊天管理器] 请求详情:`, {\n                url: '/api/chats/delete',\n                method: 'POST',\n                headers: JSON.stringify(headers),\n                body: JSON.stringify(body),\n            });\n            const response = await fetch('/api/chats/delete', {\n                method: 'POST',\n                headers,\n                body: JSON.stringify(body),\n            });\n            const text = await response.text();\n            console.info(`[聊天管理器] API 响应: status=${response.status}, statusText=${response.statusText}, body=\"${text}\"`);\n            if (response.ok) {\n                console.info(`[聊天管理器] ✅ 删除成功: ${chatfile}`);\n                return true;\n            }\n            // 记录失败原因\n            console.error(`[聊天管理器] ❌ 删除失败: HTTP ${response.status} - ${text}`);\n            return false;\n        }\n        catch (e) {\n            console.error('[聊天管理器] ❌ 删除请求异常:', e);\n            return false;\n        }\n    }\n    async function deleteChats(file_ids) {\n        console.log('[聊天管理器] ========== 开始删除操作 ==========');\n        console.log('[聊天管理器] 要删除的 file_ids:', file_ids);\n        if (file_ids.length === 0)\n            return;\n        const char_data = getCharData('current');\n        console.log('[聊天管理器] char_data:', JSON.stringify(char_data, null, 2));\n        if (!char_data) {\n            console.error('[聊天管理器] 无法获取角色信息');\n            return;\n        }\n        const avatar_url = char_data.avatar;\n        console.log('[聊天管理器] avatar_url:', avatar_url);\n        // 验证请求头\n        const test_headers = SillyTavern.getRequestHeaders();\n        console.log('[聊天管理器] 验证请求头:', {\n            'Content-Type': test_headers['Content-Type'],\n            'X-CSRF-TOKEN': test_headers['X-CSRF-TOKEN'] ? '(已设置)' : '(未设置)',\n        });\n        // 构建 file_id -> file_name 映射\n        const id_to_name = new Map();\n        for (const chat of chats.value) {\n            id_to_name.set(chat.file_id, chat.file_name);\n        }\n        // 检查对应的 ChatInfo 对象\n        for (const file_id of file_ids) {\n            const chat_info = chats.value.find(c => c.file_id === file_id);\n            console.log(`[聊天管理器] file_id \"${file_id}\" 对应的 ChatInfo:`, chat_info);\n        }\n        const original_file_id = current_chat.value?.file_id;\n        const will_delete_original = original_file_id && file_ids.includes(original_file_id);\n        // 本地即时更新：先从界面上移除，提高响应速度\n        const deleted_ids = new Set(file_ids);\n        const chats_backup = [...chats.value]; // 保存备份以便获取 file_name\n        chats.value = chats.value.filter(c => !deleted_ids.has(c.file_id));\n        await rebuildForest();\n        let success_count = 0;\n        let fail_count = 0;\n        const failed_ids = [];\n        // 使用原生 API 直接删除，使用 file_name 而非 file_id\n        for (const file_id of file_ids) {\n            // 优先使用 file_name（带正确扩展名），否则使用 file_id\n            const chat_info = chats_backup.find(c => c.file_id === file_id);\n            const chat_file = chat_info?.file_name || file_id;\n            console.log(`[聊天管理器] 使用文件名: ${chat_file} (来自 file_name: ${!!chat_info?.file_name})`);\n            const success = await deleteChatDirect(avatar_url, chat_file);\n            if (success) {\n                success_count++;\n            }\n            else {\n                fail_count++;\n                failed_ids.push(file_id);\n            }\n            // 每次请求间隔 100ms，防止服务器压力过大\n            if (file_ids.length > 1) {\n                await new Promise(r => setTimeout(r, 100));\n            }\n        }\n        // 等待 500ms 让文件系统同步\n        await new Promise(r => setTimeout(r, 500));\n        // 失效缓存并刷新列表\n        invalidateCache();\n        await loadChats(true);\n        // 如果删除了当前聊天，切换到其他聊天\n        if (will_delete_original && chats.value.length > 0) {\n            const first_chat = chats.value[0];\n            await SillyTavern.openCharacterChat(first_chat.file_id);\n            first_chat.is_current = true;\n        }\n        if (fail_count > 0) {\n            console.warn(`[聊天管理器] 删除完成: 成功 ${success_count}, 失败 ${fail_count}`, failed_ids);\n            toastr.warning(`部分删除失败: 成功 ${success_count}, 失败 ${fail_count}`);\n        }\n        return { success_count, fail_count };\n    }\n    async function deleteSelected() {\n        const to_delete = selected_nodes.value.map(n => n.chat.file_id);\n        if (to_delete.length === 0) {\n            toastr.warning('请先选择要删除的聊天记录');\n            return;\n        }\n        if (settings.value.confirm_delete) {\n            const result = await SillyTavern.callGenericPopup(`确定要删除选中的 ${to_delete.length} 个聊天记录吗？\\n\\n此操作不可撤销！`, SillyTavern.POPUP_TYPE.CONFIRM);\n            if (result !== SillyTavern.POPUP_RESULT.AFFIRMATIVE) {\n                return;\n            }\n        }\n        try {\n            is_loading.value = true;\n            await deleteChats(to_delete);\n            toastr.success(`已删除 ${to_delete.length} 个聊天记录`);\n        }\n        catch (e) {\n            toastr.error('删除聊天记录时出错');\n        }\n        finally {\n            is_loading.value = false;\n        }\n    }\n    async function renameChat(file_id, new_name) {\n        try {\n            // renameChat 可能也需要使用 file_id\n            await SillyTavern.renameChat(file_id, new_name);\n            toastr.success('重命名成功');\n            await loadChats();\n        }\n        catch (e) {\n            toastr.error('重命名失败');\n            console.error('[聊天管理器] 重命名失败:', e);\n        }\n    }\n    function saveSettings() {\n        try {\n            updateVariablesWith(vars => {\n                vars[SETTINGS_KEY] = klona(settings.value);\n                return vars;\n            }, { type: 'global' });\n        }\n        catch (e) {\n            console.error('[聊天管理器] 保存设置失败:', e);\n        }\n    }\n    // 监听排序变化\n    watch(sort_config, rebuildForest, { deep: true });\n    watch(() => settings.value.show_checkpoints, rebuildForest);\n    watch(search_keyword, rebuildForest);\n    return {\n        // 状态\n        settings,\n        is_loading,\n        is_background_loading,\n        error_message,\n        chats,\n        forest,\n        search_keyword,\n        sort_config,\n        cache_time,\n        // 计算属性\n        filtered_chats,\n        selected_nodes,\n        selected_count,\n        total_count,\n        current_chat,\n        // 方法\n        loadChats,\n        rebuildForest,\n        selectAll,\n        expandAll,\n        openChat,\n        deleteChats,\n        deleteSelected,\n        renameChat,\n        saveSettings,\n        invalidateCache,\n    };\n});\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, withModifiers as _withModifiers, unref as _unref, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode } from \"vue\";\n\nimport { computed } from 'vue';\nconst _hoisted_1 = {\n    key: 1,\n    class: \"expand-placeholder\"\n};\nconst _hoisted_2 = [\"checked\"];\nconst _hoisted_3 = { class: \"chat-header\" };\nconst _hoisted_4 = [\"title\"];\nconst _hoisted_5 = {\n    key: 0,\n    class: \"current-badge\"\n};\nconst _hoisted_6 = {\n    key: 1,\n    class: \"checkpoint-badge\"\n};\nconst _hoisted_7 = { class: \"chat-meta\" };\nconst _hoisted_8 = { class: \"message-count\" };\nconst _hoisted_9 = { class: \"update-time\" };\nconst _hoisted_10 = [\"title\"];\nconst _hoisted_11 = { class: \"chat-actions\" };\nconst _hoisted_12 = [\"disabled\"];\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ChatCard',\n    props: {\n        node: {},\n        isLastChild: { type: Boolean },\n        ancestorContinuations: {}\n    },\n    emits: [\"toggle-expand\", \"toggle-select\", \"open\", \"rename\", \"delete\"],\n    setup(__props) {\n        const props = __props;\n        // 判断某一层级是否需要显示垂直延续线\n        function shouldShowContinuation(level) {\n            if (!props.ancestorContinuations)\n                return false;\n            return props.ancestorContinuations[level] ?? false;\n        }\n        const icon_class = computed(() => {\n            if (props.node.chat.is_checkpoint)\n                return 'fa fa-bookmark';\n            if (props.node.children.length > 0)\n                return 'fa fa-folder-o';\n            return 'fa fa-file-text-o';\n        });\n        function format_time(date) {\n            const now = new Date();\n            const diff = now.getTime() - date.getTime();\n            const minutes = Math.floor(diff / 60000);\n            if (minutes < 1)\n                return '刚刚';\n            if (minutes < 60)\n                return `${minutes} 分钟前`;\n            const hours = Math.floor(minutes / 60);\n            if (hours < 24)\n                return `${hours} 小时前`;\n            const days = Math.floor(hours / 24);\n            if (days < 7)\n                return `${days} 天前`;\n            return date.toLocaleDateString('zh-CN', {\n                year: 'numeric',\n                month: 'short',\n                day: 'numeric',\n            });\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"chat-card\", {\n                        'is-current': __props.node.chat.is_current,\n                        'is-selected': __props.node.is_selected,\n                        'is-checkpoint': __props.node.chat.is_checkpoint,\n                        'has-children': __props.node.children.length > 0,\n                    }])\n            }, [\n                _createCommentVNode(\" 树形连接线区域 \"),\n                _createElementVNode(\"div\", {\n                    class: \"tree-lines\",\n                    style: _normalizeStyle({ width: `${__props.node.depth * 20}px` })\n                }, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.node.depth, (level) => {\n                        return (_openBlock(), _createElementBlock(\"span\", {\n                            key: level,\n                            class: _normalizeClass([\"tree-line\", { 'has-continuation': shouldShowContinuation(level - 1) }]),\n                            style: _normalizeStyle({ left: `${(level - 1) * 20 + 10}px` })\n                        }, null, 6 /* CLASS, STYLE */));\n                    }), 128 /* KEYED_FRAGMENT */)),\n                    _createCommentVNode(\" 水平连接线 \"),\n                    (__props.node.depth > 0)\n                        ? (_openBlock(), _createElementBlock(\"span\", {\n                            key: 0,\n                            class: _normalizeClass([\"tree-branch\", { 'is-last': __props.isLastChild }]),\n                            style: _normalizeStyle({ left: `${(__props.node.depth - 1) * 20 + 10}px` })\n                        }, null, 6 /* CLASS, STYLE */))\n                        : _createCommentVNode(\"v-if\", true)\n                ], 4 /* STYLE */),\n                _createCommentVNode(\" 展开/折叠按钮 \"),\n                (__props.node.children.length > 0)\n                    ? (_openBlock(), _createElementBlock(\"button\", {\n                        key: 0,\n                        class: \"expand-btn\",\n                        onClick: _cache[0] || (_cache[0] = _withModifiers(($event) => (_ctx.$emit('toggle-expand')), [\"stop\"]))\n                    }, [\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass(__props.node.is_expanded ? 'fa fa-chevron-down' : 'fa fa-chevron-right')\n                        }, null, 2 /* CLASS */)\n                    ]))\n                    : (_openBlock(), _createElementBlock(\"span\", _hoisted_1)),\n                _createCommentVNode(\" 选择框 \"),\n                _createElementVNode(\"input\", {\n                    type: \"checkbox\",\n                    checked: __props.node.is_selected,\n                    onChange: _cache[1] || (_cache[1] = ($event) => (_ctx.$emit('toggle-select'))),\n                    onClick: _cache[2] || (_cache[2] = _withModifiers(() => { }, [\"stop\"]))\n                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_2),\n                _createCommentVNode(\" 图标 \"),\n                _createElementVNode(\"i\", {\n                    class: _normalizeClass([_unref(icon_class), \"chat-icon\"])\n                }, null, 2 /* CLASS */),\n                _createCommentVNode(\" 聊天信息 \"),\n                _createElementVNode(\"div\", {\n                    class: \"chat-info\",\n                    onClick: _cache[3] || (_cache[3] = ($event) => (_ctx.$emit('open')))\n                }, [\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createElementVNode(\"span\", {\n                            class: \"chat-name\",\n                            title: __props.node.chat.file_name\n                        }, _toDisplayString(__props.node.chat.display_name), 9 /* TEXT, PROPS */, _hoisted_4),\n                        (__props.node.chat.is_current)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, \"当前\"))\n                            : _createCommentVNode(\"v-if\", true),\n                        (__props.node.chat.is_checkpoint)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, \"检查点\"))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_7, [\n                        _createElementVNode(\"span\", _hoisted_8, [\n                            _cache[7] || (_cache[7] = _createElementVNode(\"i\", { class: \"fa fa-comment-o\" }, null, -1 /* CACHED */)),\n                            _createTextVNode(\" \" + _toDisplayString(__props.node.chat.message_count) + \" 条 \", 1 /* TEXT */)\n                        ]),\n                        _createElementVNode(\"span\", _hoisted_9, [\n                            _cache[8] || (_cache[8] = _createElementVNode(\"i\", { class: \"fa fa-clock-o\" }, null, -1 /* CACHED */)),\n                            _createTextVNode(\" \" + _toDisplayString(format_time(__props.node.chat.updated_at)), 1 /* TEXT */)\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", {\n                        class: \"chat-preview\",\n                        title: __props.node.chat.last_message_preview\n                    }, _toDisplayString(__props.node.chat.last_message_preview || '(空)'), 9 /* TEXT, PROPS */, _hoisted_10)\n                ]),\n                _createCommentVNode(\" 操作按钮 \"),\n                _createElementVNode(\"div\", _hoisted_11, [\n                    _createElementVNode(\"button\", {\n                        class: \"action-btn\",\n                        title: \"打开\",\n                        onClick: _cache[4] || (_cache[4] = _withModifiers(($event) => (_ctx.$emit('open')), [\"stop\"]))\n                    }, [...(_cache[9] || (_cache[9] = [\n                            _createElementVNode(\"i\", { class: \"fa fa-sign-out fa-flip-horizontal\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _createElementVNode(\"button\", {\n                        class: \"action-btn\",\n                        title: \"重命名\",\n                        onClick: _cache[5] || (_cache[5] = _withModifiers(($event) => (_ctx.$emit('rename')), [\"stop\"]))\n                    }, [...(_cache[10] || (_cache[10] = [\n                            _createElementVNode(\"i\", { class: \"fa fa-pencil\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _createElementVNode(\"button\", {\n                        class: \"action-btn danger\",\n                        title: \"删除\",\n                        disabled: __props.node.chat.is_current,\n                        onClick: _cache[6] || (_cache[6] = _withModifiers(($event) => (_ctx.$emit('delete')), [\"stop\"]))\n                    }, [...(_cache[11] || (_cache[11] = [\n                            _createElementVNode(\"i\", { class: \"fa fa-trash-o\" }, null, -1 /* CACHED */)\n                        ]))], 8 /* PROPS */, _hoisted_12)\n                ])\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ChatCard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ChatCard.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ChatCard.vue?vue&type=style&index=0&id=1384f147&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1384f147\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withModifiers as _withModifiers, createBlock as _createBlock, TransitionGroup as _TransitionGroup, withCtx as _withCtx } from \"vue\";\nconst _hoisted_1 = { class: \"forest-view\" };\nconst _hoisted_2 = {\n    key: 0,\n    class: \"empty-state\"\n};\nconst _hoisted_3 = {\n    key: 1,\n    class: \"forest-list\"\n};\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = { class: \"expand-btn\" };\nconst _hoisted_6 = { class: \"tree-info\" };\nconst _hoisted_7 = { class: \"tree-name\" };\nconst _hoisted_8 = {\n    key: 0,\n    class: \"current-badge\"\n};\nconst _hoisted_9 = { class: \"tree-meta\" };\nconst _hoisted_10 = { class: \"node-count\" };\nconst _hoisted_11 = { class: \"update-time\" };\nconst _hoisted_12 = [\"onClick\"];\nimport ChatCard from './ChatCard.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ForestView',\n    props: {\n        forest: {}\n    },\n    emits: [\"open-chat\", \"rename-chat\", \"delete-chat\"],\n    setup(__props) {\n        const props = __props;\n        function get_visible_nodes(tree) {\n            const result = [];\n            function traverse(nodes, continuations = []) {\n                for (let i = 0; i < nodes.length; i++) {\n                    const node = nodes[i];\n                    const isLast = i === nodes.length - 1;\n                    result.push({\n                        node,\n                        isLastChild: isLast,\n                        ancestorContinuations: [...continuations],\n                    });\n                    if (node.is_expanded && node.children.length > 0) {\n                        traverse(node.children, [...continuations, !isLast]);\n                    }\n                }\n            }\n            traverse([tree.root]);\n            return result;\n        }\n        function toggle_tree(tree) {\n            tree.is_expanded = !tree.is_expanded;\n        }\n        function toggle_node_expand(node) {\n            node.is_expanded = !node.is_expanded;\n        }\n        function toggle_node_select(node) {\n            node.is_selected = !node.is_selected;\n        }\n        function is_tree_selected(tree) {\n            function check(node) {\n                if (!node.is_selected)\n                    return false;\n                return node.children.every(check);\n            }\n            return check(tree.root);\n        }\n        function select_tree(tree, selected) {\n            function set(node) {\n                node.is_selected = selected;\n                node.children.forEach(set);\n            }\n            set(tree.root);\n        }\n        function format_time(date) {\n            const now = new Date();\n            const diff = now.getTime() - date.getTime();\n            const minutes = Math.floor(diff / 60000);\n            if (minutes < 1)\n                return '刚刚';\n            if (minutes < 60)\n                return `${minutes} 分钟前`;\n            const hours = Math.floor(minutes / 60);\n            if (hours < 24)\n                return `${hours} 小时前`;\n            const days = Math.floor(hours / 24);\n            if (days < 7)\n                return `${days} 天前`;\n            return date.toLocaleDateString('zh-CN', {\n                year: 'numeric',\n                month: 'short',\n                day: 'numeric',\n            });\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                (__props.forest.trees.length === 0)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [...(_cache[0] || (_cache[0] = [\n                            _createElementVNode(\"i\", { class: \"fa fa-inbox\" }, null, -1 /* CACHED */),\n                            _createElementVNode(\"p\", null, \"暂无聊天记录\", -1 /* CACHED */)\n                        ]))]))\n                    : (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.forest.trees, (tree) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                                key: tree.id,\n                                class: \"tree-group\"\n                            }, [\n                                _createCommentVNode(\" 树标题栏 \"),\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"tree-header\", { 'has-current': tree.has_current }]),\n                                    onClick: ($event) => (toggle_tree(tree))\n                                }, [\n                                    _createElementVNode(\"button\", _hoisted_5, [\n                                        _createElementVNode(\"i\", {\n                                            class: _normalizeClass(tree.is_expanded ? 'fa fa-chevron-down' : 'fa fa-chevron-right')\n                                        }, null, 2 /* CLASS */)\n                                    ]),\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass([tree.node_count > 1 ? 'fa fa-code-fork' : 'fa fa-file-text-o', \"tree-icon\"])\n                                    }, null, 2 /* CLASS */),\n                                    _createElementVNode(\"div\", _hoisted_6, [\n                                        _createElementVNode(\"span\", _hoisted_7, _toDisplayString(tree.display_name), 1 /* TEXT */),\n                                        (tree.has_current)\n                                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_8, \"当前\"))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_9, [\n                                        _createElementVNode(\"span\", _hoisted_10, [\n                                            _cache[1] || (_cache[1] = _createElementVNode(\"i\", { class: \"fa fa-comments-o\" }, null, -1 /* CACHED */)),\n                                            _createTextVNode(\" \" + _toDisplayString(tree.node_count) + \" 个聊天 \", 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"span\", _hoisted_11, [\n                                            _cache[2] || (_cache[2] = _createElementVNode(\"i\", { class: \"fa fa-clock-o\" }, null, -1 /* CACHED */)),\n                                            _createTextVNode(\" \" + _toDisplayString(format_time(tree.latest_update)), 1 /* TEXT */)\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"button\", {\n                                        class: \"select-all-btn\",\n                                        title: \"选择整棵树\",\n                                        onClick: _withModifiers(($event) => (select_tree(tree, !is_tree_selected(tree))), [\"stop\"])\n                                    }, [\n                                        _createElementVNode(\"i\", {\n                                            class: _normalizeClass(is_tree_selected(tree) ? 'fa fa-check-square-o' : 'fa fa-square-o')\n                                        }, null, 2 /* CLASS */)\n                                    ], 8 /* PROPS */, _hoisted_12)\n                                ], 10 /* CLASS, PROPS */, _hoisted_4),\n                                _createCommentVNode(\" 树节点列表 \"),\n                                (tree.is_expanded)\n                                    ? (_openBlock(), _createBlock(_TransitionGroup, {\n                                        key: 0,\n                                        name: \"list\",\n                                        tag: \"div\",\n                                        class: \"tree-nodes\"\n                                    }, {\n                                        default: _withCtx(() => [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(get_visible_nodes(tree), (item) => {\n                                                return (_openBlock(), _createBlock(ChatCard, {\n                                                    key: item.node.chat.file_id,\n                                                    node: item.node,\n                                                    \"is-last-child\": item.isLastChild,\n                                                    \"ancestor-continuations\": item.ancestorContinuations,\n                                                    onToggleExpand: ($event) => (toggle_node_expand(item.node)),\n                                                    onToggleSelect: ($event) => (toggle_node_select(item.node)),\n                                                    onOpen: ($event) => (_ctx.$emit('open-chat', item.node.chat.file_id)),\n                                                    onRename: ($event) => (_ctx.$emit('rename-chat', item.node.chat.file_id)),\n                                                    onDelete: ($event) => (_ctx.$emit('delete-chat', item.node.chat.file_id))\n                                                }, null, 8 /* PROPS */, [\"node\", \"is-last-child\", \"ancestor-continuations\", \"onToggleExpand\", \"onToggleSelect\", \"onOpen\", \"onRename\", \"onDelete\"]));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ]),\n                                        _: 2 /* DYNAMIC */\n                                    }, 1024 /* DYNAMIC_SLOTS */))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ]))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ForestView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ForestView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ForestView.vue?vue&type=style&index=0&id=492ea9d4&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-492ea9d4\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, unref as _unref, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, isRef as _isRef, vModelSelect as _vModelSelect, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, createVNode as _createVNode, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = { class: \"chat-manager-panel\" };\nconst _hoisted_2 = { class: \"panel-header\" };\nconst _hoisted_3 = { class: \"toolbar\" };\nconst _hoisted_4 = { class: \"search-box\" };\nconst _hoisted_5 = { class: \"toolbar-actions\" };\nconst _hoisted_6 = [\"title\"];\nconst _hoisted_7 = { class: \"batch-bar\" };\nconst _hoisted_8 = { class: \"select-all\" };\nconst _hoisted_9 = [\"checked\", \"indeterminate\"];\nconst _hoisted_10 = { class: \"batch-actions\" };\nconst _hoisted_11 = [\"disabled\"];\nconst _hoisted_12 = [\"disabled\"];\nconst _hoisted_13 = [\"disabled\"];\nconst _hoisted_14 = { class: \"status-bar\" };\nconst _hoisted_15 = {\n    key: 0,\n    class: \"error\"\n};\nconst _hoisted_16 = {\n    key: 0,\n    class: \"cache-info\"\n};\nconst _hoisted_17 = {\n    key: 0,\n    class: \"refreshing-indicator\",\n    disabled: \"\"\n};\nimport { useChatManagerStore } from '../store';\nimport ForestView from './ForestView.vue';\n\nimport { computed, onMounted } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'MainPanel',\n    emits: [\"close\"],\n    setup(__props) {\n        const store = useChatManagerStore();\n        // 排序\n        const sort_by = computed({\n            get: () => store.sort_config.by,\n            set: value => {\n                store.sort_config.by = value;\n            },\n        });\n        const sort_order = computed({\n            get: () => store.sort_config.order,\n            set: value => {\n                store.sort_config.order = value;\n            },\n        });\n        function toggle_sort_order() {\n            sort_order.value = sort_order.value === 'desc' ? 'asc' : 'desc';\n        }\n        // 选择状态\n        const is_all_selected = computed(() => store.total_count > 0 && store.selected_count === store.total_count);\n        const is_partial_selected = computed(() => store.selected_count > 0 && store.selected_count < store.total_count);\n        function toggle_select_all() {\n            store.selectAll(!is_all_selected.value);\n        }\n        // 操作处理\n        async function handle_open_chat(file_id) {\n            await store.openChat(file_id);\n        }\n        async function handle_rename_chat(file_id) {\n            const chat = store.chats.find(c => c.file_id === file_id);\n            if (!chat)\n                return;\n            const new_name = await SillyTavern.callGenericPopup('请输入新的聊天名称:', SillyTavern.POPUP_TYPE.INPUT, chat.display_name);\n            if (new_name && typeof new_name === 'string' && new_name.trim()) {\n                await store.renameChat(file_id, new_name.trim());\n            }\n        }\n        async function handle_delete_chat(file_id) {\n            const chat = store.chats.find(c => c.file_id === file_id);\n            if (!chat)\n                return;\n            if (chat.is_current) {\n                toastr.warning('无法删除当前正在使用的聊天');\n                return;\n            }\n            if (store.settings.confirm_delete) {\n                const result = await SillyTavern.callGenericPopup(`确定要删除聊天 \"${chat.display_name}\" 吗？\\n\\n此操作不可撤销！`, SillyTavern.POPUP_TYPE.CONFIRM);\n                if (result !== SillyTavern.POPUP_RESULT.AFFIRMATIVE) {\n                    return;\n                }\n            }\n            try {\n                await store.deleteChats([file_id]);\n                toastr.success('已删除聊天');\n            }\n            catch {\n                toastr.error('删除失败');\n            }\n        }\n        // 格式化缓存时间\n        function format_cache_time(date) {\n            const now = new Date();\n            const diff = Math.floor((now.getTime() - date.getTime()) / 1000);\n            if (diff < 5)\n                return '刚刚';\n            if (diff < 60)\n                return `${diff}秒前`;\n            if (diff < 3600)\n                return `${Math.floor(diff / 60)}分钟前`;\n            return '已过期';\n        }\n        // 初始化\n        onMounted(() => {\n            store.loadChats();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" 标题栏 \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[9] || (_cache[9] = _createElementVNode(\"h2\", null, [\n                        _createElementVNode(\"i\", { class: \"fa fa-comments-o\" }),\n                        _createTextVNode(\" 聊天管理器 \")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"button\", {\n                        class: \"close-btn\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('close')))\n                    }, [...(_cache[8] || (_cache[8] = [\n                            _createElementVNode(\"i\", { class: \"fa fa-times\" }, null, -1 /* CACHED */)\n                        ]))])\n                ]),\n                _createCommentVNode(\" 工具栏 \"),\n                _createElementVNode(\"div\", _hoisted_3, [\n                    _createElementVNode(\"div\", _hoisted_4, [\n                        _cache[11] || (_cache[11] = _createElementVNode(\"i\", { class: \"fa fa-search\" }, null, -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((_unref(store).search_keyword) = $event)),\n                            type: \"text\",\n                            placeholder: \"搜索聊天...\"\n                        }, null, 512 /* NEED_PATCH */), [\n                            [_vModelText, _unref(store).search_keyword]\n                        ]),\n                        (_unref(store).search_keyword)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 0,\n                                class: \"clear-btn\",\n                                onClick: _cache[2] || (_cache[2] = ($event) => (_unref(store).search_keyword = ''))\n                            }, [...(_cache[10] || (_cache[10] = [\n                                    _createElementVNode(\"i\", { class: \"fa fa-times-circle\" }, null, -1 /* CACHED */)\n                                ]))]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_5, [\n                        _withDirectives(_createElementVNode(\"select\", {\n                            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => (_isRef(sort_by) ? (sort_by).value = $event : null)),\n                            class: \"sort-select\"\n                        }, [...(_cache[12] || (_cache[12] = [\n                                _createElementVNode(\"option\", { value: \"updated_at\" }, \"按更新时间\", -1 /* CACHED */),\n                                _createElementVNode(\"option\", { value: \"created_at\" }, \"按创建时间\", -1 /* CACHED */),\n                                _createElementVNode(\"option\", { value: \"name\" }, \"按名称\", -1 /* CACHED */),\n                                _createElementVNode(\"option\", { value: \"message_count\" }, \"按消息数\", -1 /* CACHED */)\n                            ]))], 512 /* NEED_PATCH */), [\n                            [_vModelSelect, _unref(sort_by)]\n                        ]),\n                        _createElementVNode(\"button\", {\n                            class: \"icon-btn\",\n                            title: _unref(sort_order) === 'desc' ? '降序' : '升序',\n                            onClick: toggle_sort_order\n                        }, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(_unref(sort_order) === 'desc' ? 'fa fa-sort-amount-desc' : 'fa fa-sort-amount-asc')\n                            }, null, 2 /* CLASS */)\n                        ], 8 /* PROPS */, _hoisted_6),\n                        _createElementVNode(\"button\", {\n                            class: \"icon-btn\",\n                            title: \"刷新\",\n                            onClick: _cache[4] || (_cache[4] = ($event) => (_unref(store).loadChats()))\n                        }, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass([\"fa fa-refresh\", { 'fa-spin': _unref(store).is_loading }])\n                            }, null, 2 /* CLASS */)\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\" 批量操作栏 \"),\n                _createElementVNode(\"div\", _hoisted_7, [\n                    _createElementVNode(\"label\", _hoisted_8, [\n                        _createElementVNode(\"input\", {\n                            type: \"checkbox\",\n                            checked: _unref(is_all_selected),\n                            indeterminate: _unref(is_partial_selected),\n                            onChange: toggle_select_all\n                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_9),\n                        _cache[13] || (_cache[13] = _createElementVNode(\"span\", null, \"全选\", -1 /* CACHED */))\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_10, [\n                        _createElementVNode(\"button\", {\n                            class: \"batch-btn\",\n                            disabled: _unref(store).selected_count === 0,\n                            onClick: _cache[5] || (_cache[5] = ($event) => (_unref(store).expandAll(true)))\n                        }, [...(_cache[14] || (_cache[14] = [\n                                _createElementVNode(\"i\", { class: \"fa fa-expand\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\" 展开全部 \", -1 /* CACHED */)\n                            ]))], 8 /* PROPS */, _hoisted_11),\n                        _createElementVNode(\"button\", {\n                            class: \"batch-btn\",\n                            disabled: _unref(store).selected_count === 0,\n                            onClick: _cache[6] || (_cache[6] = ($event) => (_unref(store).expandAll(false)))\n                        }, [...(_cache[15] || (_cache[15] = [\n                                _createElementVNode(\"i\", { class: \"fa fa-compress\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\" 折叠全部 \", -1 /* CACHED */)\n                            ]))], 8 /* PROPS */, _hoisted_12),\n                        _createElementVNode(\"button\", {\n                            class: \"batch-btn danger\",\n                            disabled: _unref(store).selected_count === 0,\n                            onClick: _cache[7] || (_cache[7] = ($event) => (_unref(store).deleteSelected()))\n                        }, [\n                            _cache[16] || (_cache[16] = _createElementVNode(\"i\", { class: \"fa fa-trash-o\" }, null, -1 /* CACHED */)),\n                            _createTextVNode(\" 删除选中 (\" + _toDisplayString(_unref(store).selected_count) + \") \", 1 /* TEXT */)\n                        ], 8 /* PROPS */, _hoisted_13)\n                    ])\n                ]),\n                _createCommentVNode(\" 聊天列表 \"),\n                _createVNode(ForestView, {\n                    forest: _unref(store).forest,\n                    onOpenChat: handle_open_chat,\n                    onRenameChat: handle_rename_chat,\n                    onDeleteChat: handle_delete_chat\n                }, null, 8 /* PROPS */, [\"forest\"]),\n                _createCommentVNode(\" 状态栏 \"),\n                _createElementVNode(\"div\", _hoisted_14, [\n                    (_unref(store).error_message)\n                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_15, [\n                            _cache[17] || (_cache[17] = _createElementVNode(\"i\", { class: \"fa fa-exclamation-triangle\" }, null, -1 /* CACHED */)),\n                            _createTextVNode(\" \" + _toDisplayString(_unref(store).error_message), 1 /* TEXT */)\n                        ]))\n                        : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                            _createElementVNode(\"span\", null, \"已选中 \" + _toDisplayString(_unref(store).selected_count) + \" 个 | 共 \" + _toDisplayString(_unref(store).total_count) + \" 个聊天\", 1 /* TEXT */),\n                            (_unref(store).cache_time)\n                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_16, [\n                                    _cache[19] || (_cache[19] = _createElementVNode(\"i\", { class: \"fa fa-database\" }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" 缓存: \" + _toDisplayString(format_cache_time(_unref(store).cache_time)) + \" \", 1 /* TEXT */),\n                                    (_unref(store).is_background_loading)\n                                        ? (_openBlock(), _createElementBlock(\"button\", _hoisted_17, [...(_cache[18] || (_cache[18] = [\n                                                _createElementVNode(\"i\", { class: \"fa fa-refresh fa-spin\" }, null, -1 /* CACHED */)\n                                            ]))]))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ], 64 /* STABLE_FRAGMENT */))\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./MainPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MainPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MainPanel.vue?vue&type=style&index=0&id=34a25112&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-34a25112\"]])\n\nexport default __exports__","import { createScriptIdDiv, destroyScriptIdDiv, deteleportStyle, teleportStyle } from '@/util/script';\nimport MainPanel from './components/MainPanel.vue';\nlet is_open = false;\nlet app_instance = null;\nlet $container = null;\nfunction openChatManager() {\n    if (is_open) {\n        closeChatManager();\n        return;\n    }\n    // 检查是否有选中的角色\n    const char_data = getCharData('current');\n    if (!char_data) {\n        toastr.warning('请先选择一个角色卡');\n        return;\n    }\n    // 创建容器\n    $container = createScriptIdDiv();\n    $container.addClass('chat-manager-container');\n    $container.css({\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\n        zIndex: 9999,\n    });\n    // 点击背景关闭\n    $container.on('click', e => {\n        if (e.target === $container[0]) {\n            closeChatManager();\n        }\n    });\n    // 按 ESC 关闭\n    $(document).on('keydown.chat-manager', e => {\n        if (e.key === 'Escape') {\n            closeChatManager();\n        }\n    });\n    $('body').append($container);\n    teleportStyle();\n    // 创建内部挂载点\n    const $app = $('<div>').appendTo($container);\n    // 创建 Vue 应用\n    app_instance = createApp(MainPanel, {\n        onClose: closeChatManager,\n    });\n    app_instance.use(createPinia());\n    app_instance.mount($app[0]);\n    is_open = true;\n    console.info('[聊天管理器] 已打开');\n}\nfunction closeChatManager() {\n    if (!is_open)\n        return;\n    $(document).off('keydown.chat-manager');\n    if (app_instance) {\n        app_instance.unmount();\n        app_instance = null;\n    }\n    if ($container) {\n        $container.remove();\n        $container = null;\n    }\n    deteleportStyle();\n    is_open = false;\n    console.info('[聊天管理器] 已关闭');\n}\n// 注册脚本按钮\n$(() => {\n    replaceScriptButtons([{ name: '聊天管理器', visible: true }]);\n    eventOn(getButtonEvent('聊天管理器'), () => {\n        errorCatched(openChatManager)();\n    });\n    console.info('[聊天管理器] 脚本已加载');\n});\n// 卸载时清理\n$(window).on('pagehide', () => {\n    closeChatManager();\n    destroyScriptIdDiv();\n});\n","export async function loadReadme(url: string): Promise<boolean> {\n  const readme = await fetch(url);\n  if (!readme.ok) {\n    return false;\n  }\n  const readme_text = await readme.text();\n  replaceScriptInfo(readme_text);\n  return true;\n}\n\nexport function teleportStyle() {\n  if ($(`head > div[script_id=\"${getScriptId()}\"]`).length > 0) {\n    return;\n  }\n  const $div = $(`<div>`).attr('script_id', getScriptId()).append($(`head > style`, document).clone());\n  $('head').append($div);\n}\n\nexport function deteleportStyle() {\n  $(`head > div[script_id=\"${getScriptId()}\"]`).remove();\n}\n\nexport function createScriptIdDiv(): JQuery<HTMLDivElement> {\n  return $('<div>').attr('script_id', getScriptId()) as JQuery<HTMLDivElement>;\n}\n\nexport function destroyScriptIdDiv(): void {\n  $(`div[script_id=\"${getScriptId()}\"]`).remove();\n}\n\nexport function reloadOnChatChange(): EventOnReturn {\n  let chat_id = SillyTavern.getCurrentChatId();\n  return eventOn(tavern_events.CHAT_CHANGED, new_chat_id => {\n    if (chat_id !== new_chat_id) {\n      chat_id = new_chat_id;\n      window.location.reload();\n    }\n  });\n}\n"],"names":["content","__esModule","default","module","id","locals","exports","add","___CSS_LOADER_EXPORT___","push","listToStyles","parentId","list","styles","newStyles","i","length","item","part","css","media","sourceMap","parts","hasDocument","document","DEBUG","Error","stylesInDom","head","getElementsByTagName","singletonElement","singletonCounter","isProduction","noop","options","ssrIdKey","isOldIE","navigator","test","userAgent","toLowerCase","addStylesClient","_isProduction","_options","addStylesToDom","newList","mayRemove","domStyle","refs","j","addStyle","createStyleElement","styleElement","createElement","type","appendChild","obj","update","remove","querySelector","parentNode","removeChild","styleIndex","applyToSingletonTag","bind","applyToTag","newObj","textStore","replaceText","index","replacement","filter","Boolean","join","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","setAttribute","ssrId","sources","btoa","unescape","encodeURIComponent","JSON","stringify","firstChild","sfc","props","target","__vccOpts","key","val","cssMapping","base64","data","concat","sourceMapping","cssWithMappingToString","toString","this","map","needLayer","modules","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","d","a","definition","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","Vue","cleanFileName","name","base","endsWith","slice","full","parseFileTimestamp","file_name","patterns","pattern","match","date","h","m","s","Date","y","mo","mi","parseInt","extractDisplayName","char_name","replace","RegExp","_","escapeRegExp","trim","truncatePreview","message","max_length","clean","detectBranchInfo","is_checkpoint","includes","branch_match","parent_hint","async","fetchChatList","preview_length","char_data","getCharData","console","warn","char_avatar","avatar","current_chat","chat","info","char_chats","response","fetch","method","headers","SillyTavern","getRequestHeaders","body","metadata","max","ok","json","status","e","error","fetchChatsWithMetadata","c","chat_briefs","getChatHistoryBrief","result","brief","raw_file_id","file_id","message_count","chat_items","mes_preview","mes","created_at","display_name","updated_at","first_message_preview","last_message_preview","parent_chat","is_current","parseBriefChats","debug","main_chat","chat_metadata","sortChats","chats","config","sorted","multiplier","order","sort","b","by","getTime","localeCompare","getSelectedNodes","nodes","selected","forEach","traverse","node","is_selected","children","setAllSelected","setAllExpanded","expanded","is_expanded","buildChatForest","detect_branches","sort_config","sorted_chats","relations","Map","name_to_id","set","parent_id","size","has","node_map","depth","roots","parent_node","sortChildrenDesc","trees","root","tree_nodes","flattenTreeAll","latest","reduce","has_current","some","node_count","latest_update","total_count","child","DEFAULT_SETTINGS","default_sort","show_checkpoints","confirm_delete","SETTINGS_KEY","global_cache","useChatManagerStore","settings","ref","saved","getVariables","is_loading","is_background_loading","error_message","forest","search_keyword","cache_time","filtered_chats","computed","search","keyword","filterChats","selected_nodes","tree","getSelectedNodesFromForest","selected_count","countNodesInForest","find","updateCache","new_chats","timestamp","now","character","loadChats","force_refresh","is_same_char","is_not_expired","isCacheValid","rebuildForest","refreshInBackground","invalidateCache","deleteChatDirect","avatar_url","chat_file","log","base_name","removed_count","chatfile","expected_path","url","text","statusText","deleteChats","file_ids","test_headers","id_to_name","chat_info","original_file_id","will_delete_original","deleted_ids","Set","chats_backup","success_count","fail_count","failed_ids","Promise","setTimeout","first_chat","openCharacterChat","toastr","warning","watch","deep","selectAll","setAllSelectedInForest","expandAll","setAllTreesExpanded","openChat","success","deleteSelected","to_delete","callGenericPopup","POPUP_TYPE","CONFIRM","POPUP_RESULT","AFFIRMATIVE","renameChat","new_name","saveSettings","updateVariablesWith","vars","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","__name","isLastChild","ancestorContinuations","emits","setup","__props","shouldShowContinuation","level","icon_class","format_time","diff","minutes","Math","floor","hours","days","toLocaleDateString","year","month","day","_ctx","_cache","style","width","left","onClick","$event","$emit","checked","onChange","title","disabled","get_visible_nodes","continuations","isLast","is_tree_selected","check","every","tag","ChatCard","onToggleExpand","onToggleSelect","onOpen","onRename","onDelete","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","store","sort_by","sort_order","toggle_sort_order","is_all_selected","is_partial_selected","toggle_select_all","handle_open_chat","handle_rename_chat","INPUT","handle_delete_chat","format_cache_time","onMounted","placeholder","indeterminate","ForestView","onOpenChat","onRenameChat","onDeleteChat","is_open","app_instance","$container","openChatManager","closeChatManager","$","attr","getScriptId","addClass","position","top","right","bottom","display","alignItems","justifyContent","backgroundColor","zIndex","on","append","$div","clone","teleportStyle","$app","appendTo","createApp","MainPanel","onClose","use","mount","off","unmount","replaceScriptButtons","visible","eventOn","getButtonEvent","errorCatched","window"],"ignoreList":[],"sourceRoot":""}